<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>Luis Quintanilla - Wiki</title>
    <link>https://www.lqdev.me/resources/wiki</link>
    <description>Wiki articles by Luis Quintanilla</description>
    <lastBuildDate>01/30/2025 20:19 -05:00</lastBuildDate>
    <language>en</language>
    <item>
      <title>Owncast</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;Owncast is a free and open source live video and web chat server for use with existing popular broadcasting software.&lt;/p&gt;
&lt;h2&gt;Simulcast&lt;/h2&gt;
&lt;p&gt;By default, when you set up streaming software, it will only stream to your Owncast instance. If you want to simultaneously broadcast to various services, you'll have to either use something like Restream or you can also use FFMPEG.&lt;/p&gt;
&lt;h3&gt;YouTube&lt;/h3&gt;
&lt;p&gt;With your brodcast stream started, use the following FFMPEG command to simulcast to YouTube.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;ffmpeg -v verbose -re -i https://YOUR-OWNCAST-SERVER/hls/stream.m3u8 -c:v libx264 -c:a aac -f flv rtmp://a.rtmp.youtube.com/live2/YOUR-STREAM-KEY
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This command will copy the video and audio feeds from your HLS Owncast live stream and forward them to YouTube.&lt;/p&gt;
&lt;h2&gt;Ressources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://owncast.online/"&gt;Owncast&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://obsproject.com/forum/resources/obs-studio-stream-to-multiple-platforms-or-channels-at-once.932/"&gt;OBS Studio: Stream to multiple platforms or channels at once&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/owncast</link>
      <guid>https://www.lqdev.me/resources/wiki/owncast</guid>
      <pubDate>01/30/2025 20:19 -05:00</pubDate>
      <category>owncast</category>
      <category>fediverse</category>
      <category>livestream</category>
    </item>
    <item>
      <title>Upgrade NixOS versions</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This guide provides general guidance on upgrading between NixOS versions&lt;/p&gt;
&lt;h2&gt;Check which version you're currently running&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;cat /etc/lsb_release
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Get list of channels&lt;/h2&gt;
&lt;p&gt;This provides the URL used to download packages for nixos release&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-channel --list | grep nixos
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Add / Replace Software Channel&lt;/h2&gt;
&lt;p&gt;To get on the latest version, you need to update the &lt;code&gt;nixos&lt;/code&gt; channel to the latest version.&lt;/p&gt;
&lt;p&gt;You can find a list of versions in this &lt;a href="https://channels.nixos.org/"&gt;repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For example, if you wanted to upgrade to the latest 24.05 version, you'd use the following command:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-channel --add https://channels.nixos.org/nixos-24.05 nixos
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The general format is: &lt;code&gt;nix-channel --add &amp;lt;CHANNEL_URL&amp;gt; nixos&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Rebuild your system&lt;/h2&gt;
&lt;p&gt;Once you've configured the channel for the latest version, switch to it just like you would when upgading sofware packages.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nixos-rebuild switch --upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After the operation completes, you'll want to check which version is running as mentioned in previous instructions.&lt;/p&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://nlewo.github.io/nixos-manual-sphinx/installation/upgrading.xml.html"&gt;Upgrading Nix OS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/nix-upgrade-versions</link>
      <guid>https://www.lqdev.me/resources/wiki/nix-upgrade-versions</guid>
      <pubDate>2024-07-14 14:49 -05:00</pubDate>
      <category>linux</category>
      <category>sysadmin</category>
      <category>nixos</category>
      <category>nix</category>
      <category>os</category>
    </item>
    <item>
      <title>Mastodon Server Cleanup</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;General commands for cleaning up resources on Mastodon servers&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Stop services&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl stop mastodon-sidekiq mastodon-streaming mastodon-web
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Restart postgresql&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl restart postgresql
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Log into mastodon user&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo su - mastodon
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Go to &lt;code&gt;live&lt;/code&gt; directory&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;cd /home/mastodon/live
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Check media usage&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;RAILS_ENV=production ./bin/tootctl media usage
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Remove media&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;RAILS_ENV=production ./bin/tootctl media remove
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Remove media headers&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;RAILS_ENV=production ./bin/tootctl media remove --prune-profiles
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Remove preview cards&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;RAILS_ENV=production ./bin/tootctl preview_cards remove
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Restart services&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl restart mastodon-sidekiq mastodon-streaming mastodon-web
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.joinmastodon.org/admin/tootctl/"&gt;Using the Admin CLI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/mastodon-server-cleanup</link>
      <guid>https://www.lqdev.me/resources/wiki/mastodon-server-cleanup</guid>
      <pubDate>07/14/2024 03:24 -05:00</pubDate>
      <category>mastodon</category>
      <category>linux</category>
      <category>socialmedia</category>
      <category>sysadmin</category>
    </item>
    <item>
      <title>Mastodon Server Upgrades</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This provides a guide for upgrading specific versions.&lt;/p&gt;
&lt;h2&gt;Backup Instructions&lt;/h2&gt;
&lt;p&gt;These instructions backup the database and environment variables file. It does not back-up media files.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Create new directory called &lt;em&gt;backups/&amp;lt;DATE&amp;gt;&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Copy &lt;em&gt;live/.env.production&lt;/em&gt; to &lt;em&gt;backups/&amp;lt;DATE&amp;gt;&lt;/em&gt; directory.&lt;/li&gt;
&lt;li&gt;Dump database &lt;code&gt;pg_dump -Fc mastodon_production -f /home/mastodon/backups/&amp;lt;DATE&amp;gt;/backup.dump&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Versions&lt;/h2&gt;
&lt;h3&gt;3.4.1&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file.&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.1 tag - &lt;code&gt;git checkout v3.4.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Migrate DB - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile Assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.2&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file.&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.2 tag - &lt;code&gt;git checkout v3.4.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Migrate DB - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile Assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.3&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.3 tag - &lt;code&gt;git checkout v3.4.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Migrate DB - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile Assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.4&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.4 tag - &lt;code&gt;git checkout v3.4.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile Assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.5&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.5 tag - &lt;code&gt;git checkout v3.4.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.6&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.6 tag - &lt;code&gt;git checkout v3.4.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.4.7&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.4.7 tag - &lt;code&gt;git checkout v3.4.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.5.0&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Checkout 3.5.0 tag - &lt;code&gt;git checkout v3.5.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update available rbenv version - &lt;code&gt;git -C /home/mastodon/.rbenv/plugins/ruby-build pull&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby 3.0.3 - &lt;code&gt;RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.0.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run predeployment DB migration - &lt;code&gt;SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update service files - &lt;code&gt;cp /home/mastodon/live/dist/mastodon-*.service /etc/systemd/system/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Reload systemd daemon - &lt;code&gt;systemctl daemon-reload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Clear cache - &lt;code&gt;RAILS_ENV=production bin/tootctl cache clear&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run postdeployment DB migration - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.5.1&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.5.1 tag - &lt;code&gt;git checkout v3.5.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.5.2&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.5.2 tag - &lt;code&gt;git checkout v3.5.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run predeployment DB migration - &lt;code&gt;SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run postdeployment DB migration - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3.5.3&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 3.5.3 tag - &lt;code&gt;git checkout v3.5.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.0.0&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Upgade NodeJS - &lt;code&gt;curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash - &amp;amp;&amp;amp; sudo apt-get install -y nodejs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby 3.0.4 - &lt;code&gt;RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.0.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.0.0 tag - &lt;code&gt;git checkout v4.0.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run predeployment DB migration - &lt;code&gt;SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update service files - &lt;code&gt;cp /home/mastodon/live/dist/mastodon-*.service /etc/systemd/system/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Reload systemd daemon - &lt;code&gt;systemctl daemon-reload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run postdeployment DB migration - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.0.2&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.0.2 tag - &lt;code&gt;git checkout v4.0.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;NOTE: Node 18 not supported yet. If you run into issues upgrading directly from 3.5.3, checkout v4.0.0 tag and the upgrade to v4.0.2&lt;/p&gt;
&lt;h3&gt;4.1.0&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.0 tag - &lt;code&gt;git checkout v4.1.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run DB migration - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.1&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.1 tag - &lt;code&gt;git checkout v4.1.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.2&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.3 tag - &lt;code&gt;git checkout v4.1.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update rbenv version - &lt;code&gt;git -C /home/mastodon/.rbenv/plugins/ruby-build pull&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby 3.0.6 - &lt;code&gt;RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.0.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.3&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.3 tag - &lt;code&gt;git checkout v4.1.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;(Optional) Upgrade reverse proxy &lt;code&gt;Content-Security-Policy: default-src 'none'; form-action 'none'&lt;/code&gt; &amp;amp; &lt;code&gt;X-Content-Type-Options: nosniff&lt;/code&gt;. More info can be found in &lt;em&gt;dist/nginx.conf&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.4&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.4 tag - &lt;code&gt;git checkout v4.1.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;(Optional) Upgrade reverse proxy &lt;code&gt;Content-Security-Policy: default-src 'none'; form-action 'none'&lt;/code&gt; &amp;amp;&lt;code&gt;X-Content-Type-Options: nosniff&lt;/code&gt;. More info can be found in &lt;em&gt;dist/nginx.conf&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.5&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.5 tag - &lt;code&gt;git checkout v4.1.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.6&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.6 tag - &lt;code&gt;git checkout v4.1.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.7&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.7 tag - &lt;code&gt;git checkout v4.1.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.8&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.8 tag - &lt;code&gt;git checkout v4.1.8&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.1.9&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.9 tag - &lt;code&gt;git checkout v4.1.9&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.0&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.1.9 tag - &lt;code&gt;git checkout v4.2.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update Streaming Server Service
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sudo cp ~mastodon/live/dist/mastodon-streaming*.service /etc/systemd/system/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sudo systemctl daemon-reload&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Update rbenv version - &lt;code&gt;git -C /home/mastodon/.rbenv/plugins/ruby-build pull&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby 3.2.2 - &lt;code&gt;RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.2.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run predeployment DB migration - &lt;code&gt;SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;systemctl start mastodon-sidekiq mastodon-web mastodon-streaming&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run postdeployment DB migration - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.1&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.1 tag - &lt;code&gt;git checkout v4.2.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.2&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.2 tag - &lt;code&gt;git checkout v4.2.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.3&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.3 tag - &lt;code&gt;git checkout v4.2.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.4&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.4 tag - &lt;code&gt;git checkout v4.2.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Update rbenv version - &lt;code&gt;git -C /home/mastodon/.rbenv/plugins/ruby-build pull&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby 3.2.3 - &lt;code&gt;RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.2.3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.5&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.5 tag - &lt;code&gt;git checkout v4.2.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.6&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.6 tag - &lt;code&gt;git checkout v4.2.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.7&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.7 tag - &lt;code&gt;git checkout v4.2.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.8&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.8 tag - &lt;code&gt;git checkout v4.2.8&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.9&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.9 tag - &lt;code&gt;git checkout v4.2.9&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.10&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.10 tag - &lt;code&gt;git checkout v4.2.10&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.11&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.11 tag - &lt;code&gt;git checkout v4.2.11&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.12&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.12 tag - &lt;code&gt;git checkout v4.2.12&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.2.13&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.2.13 tag - &lt;code&gt;git checkout v4.2.13&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --frozen-lockfile&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4.3.0 NOT WORKING&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Stop services - &lt;code&gt;systemctl stop mastodon-*.service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Backup database and env file&lt;/li&gt;
&lt;li&gt;Fetch tags - &lt;code&gt;git fetch &amp;amp;&amp;amp; git fetch --tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Checkout 4.3.0 tag - &lt;code&gt;git checkout v4.3.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install yarn4 - &lt;code&gt;corepack enable&lt;/code&gt; then, &lt;code&gt;corepack prepare&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install Ruby dependencies - &lt;code&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install JS dependencies - &lt;code&gt;yarn install --immutable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Generate secrets - &lt;code&gt;RAILS_ENV=production bin/rails db:encryption:init&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Copy secrets to &lt;code&gt;.env.production&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;Precompile assets - &lt;code&gt;RAILS_ENV=production bundle exec rails assets:precompile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run predeployment database migrations - &lt;code&gt;SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart services - &lt;code&gt;sudo systemctl restart mastodon-sidekiq mastodon-streaming mastodon-web&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run postdeployment database migrations - &lt;code&gt;RAILS_ENV=production bundle exec rails db:migrate&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Restart Services&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl restart mastodon-sidekiq mastodon-streaming mastodon-web
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/troubleshooting/index-corruption&lt;/li&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/install/&lt;/li&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/upgrading/&lt;/li&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/backups/&lt;/li&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/migrating/&lt;/li&gt;
&lt;li&gt;https://docs.joinmastodon.org/admin/tootctl/&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/mastodon-server-upgrades</link>
      <guid>https://www.lqdev.me/resources/wiki/mastodon-server-upgrades</guid>
      <pubDate>07/14/2024 03:16 -05:00</pubDate>
      <category>selfhost</category>
      <category>socialmedia</category>
      <category>mastodon</category>
      <category>fediverse</category>
    </item>
    <item>
      <title>DevContainer configurations</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;A collection of DevContainer configurations&lt;/p&gt;
&lt;h2&gt;Base Debian Image&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me Base Debian DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;
            ]
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Python&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me Python DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/python:1&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;3.11&amp;quot;
        },
        &amp;quot;ghcr.io/va-h/devcontainers-features/uv:1&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-python.python&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;                
            ]
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Python (GPU)&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me Python (GPU) DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/python:1&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;3.11&amp;quot;
        },
        &amp;quot;ghcr.io/devcontainers/features/nvidia-cuda:1&amp;quot;: {},
        &amp;quot;ghcr.io/va-h/devcontainers-features/uv:1&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-python.python&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;                
            ]
        }
    },
    &amp;quot;runArgs&amp;quot;: [
        &amp;quot;--gpus&amp;quot;, 
        &amp;quot;all&amp;quot;
    ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;.NET&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me .NET DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/dotnet:2&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;9.0&amp;quot;
        }
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-dotnettools.csharp&amp;quot;,
                &amp;quot;Ionide.Ionide-fsharp&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;,
                &amp;quot;ms-dotnettools.csdevkit&amp;quot;                                
            ]
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;.NET (GPU)&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me .NET (GPU) DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/dotnet:2&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;9.0&amp;quot;
        },
        &amp;quot;ghcr.io/devcontainers/features/nvidia-cuda:1&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-dotnettools.csharp&amp;quot;,
                &amp;quot;Ionide.Ionide-fsharp&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;,
                &amp;quot;ms-dotnettools.csdevkit&amp;quot;                
            ]
        }
    },
    &amp;quot;runArgs&amp;quot;: [
        &amp;quot;--gpus&amp;quot;, 
        &amp;quot;all&amp;quot;
    ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Python and .NET&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me Python and .NET DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/python:1&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;3.11&amp;quot;
        },        
        &amp;quot;ghcr.io/devcontainers/features/dotnet:2&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;9.0&amp;quot;
        },
        &amp;quot;ghcr.io/va-h/devcontainers-features/uv:1&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-python.python&amp;quot;,
                &amp;quot;ms-dotnettools.csharp&amp;quot;,
                &amp;quot;Ionide.Ionide-fsharp&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;,
                &amp;quot;ms-dotnettools.csdevkit&amp;quot;                
            ]
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Python and .NET (GPU)&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-json"&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;lqdev.me Python and .NET (GPU) DevContainer&amp;quot;,
    &amp;quot;image&amp;quot;: &amp;quot;mcr.microsoft.com/devcontainers/base:debian&amp;quot;,
    &amp;quot;features&amp;quot;: {
        &amp;quot;ghcr.io/devcontainers/features/git:1&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/docker-in-docker:2&amp;quot;: {},
        &amp;quot;ghcr.io/devcontainers/features/python:1&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;3.11&amp;quot;
        },        
        &amp;quot;ghcr.io/devcontainers/features/dotnet:2&amp;quot;: {
            &amp;quot;version&amp;quot;: &amp;quot;9.0&amp;quot;
        },
        &amp;quot;ghcr.io/devcontainers/features/nvidia-cuda:1&amp;quot;: {},
        &amp;quot;ghcr.io/va-h/devcontainers-features/uv:1&amp;quot;: {}
    },
    &amp;quot;customizations&amp;quot;: {
        &amp;quot;vscode&amp;quot;: {
            &amp;quot;extensions&amp;quot;: [
                &amp;quot;ms-vscode-remote.vscode-remote-extensionpack&amp;quot;,
                &amp;quot;ms-azuretools.vscode-docker&amp;quot;,
                &amp;quot;ms-python.python&amp;quot;,
                &amp;quot;ms-dotnettools.csharp&amp;quot;,
                &amp;quot;Ionide.Ionide-fsharp&amp;quot;,
                &amp;quot;GitHub.copilot&amp;quot;,
                &amp;quot;GitHub.copilot-chat&amp;quot;,
                &amp;quot;saoudrizwan.claude-dev&amp;quot;,
                &amp;quot;ms-dotnettools.csdevkit&amp;quot;               
            ]
        }
    },
    &amp;quot;runArgs&amp;quot;: [
        &amp;quot;--gpus&amp;quot;, 
        &amp;quot;all&amp;quot;
    ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://code.visualstudio.com/docs/devcontainers/containers"&gt;Developing inside a DevContainer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/devcontainers/images"&gt;Pre-built DevContainer images&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/devcontainers/features"&gt;Pre-built DevContainer features&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.github.com/en/codespaces/overview"&gt;GitHub Codespaces overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://marketplace.visualstudio.com/vscode"&gt;VS Code Extensions Marketplace&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/devcontainers-configurations</link>
      <guid>https://www.lqdev.me/resources/wiki/devcontainers-configurations</guid>
      <pubDate>06/29/2024 14:48 -05:00</pubDate>
      <category>devcontainer</category>
      <category>vscode</category>
      <category>codespaces</category>
      <category>development</category>
      <category>software</category>
      <category>tech</category>
      <category>programming</category>
      <category>python</category>
      <category>dotnet</category>
      <category>csharp</category>
      <category>fsharp</category>
      <category>docker</category>
      <category>git</category>
      <category>debian</category>
    </item>
    <item>
      <title>Pandoc</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;If you need to convert files from one markup format into another, pandoc is your swiss-army knife.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pandoc.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Recipes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pandoc.org/demos.html"&gt;List of recipes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Emacs org-mode to Microsoft Word&lt;/h3&gt;
&lt;p&gt;Personally, I like drafting and structuring documents in org-mode. However, for sharing and collaboration, that usually takes place in Microsoft Word. This is a command I use on a regular basis.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;pandoc -s -o &amp;lt;document-name&amp;gt;.docx &amp;lt;document-name&amp;gt;.org
&lt;/code&gt;&lt;/pre&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/pandoc</link>
      <guid>https://www.lqdev.me/resources/wiki/pandoc</guid>
      <pubDate>04/25/2024 22:00 -05:00</pubDate>
      <category>pandoc</category>
      <category>plaintext</category>
      <category>docx</category>
      <category>documents</category>
      <category>word</category>
      <category>org</category>
      <category>emacs</category>
      <category>utility</category>
      <category>linux</category>
    </item>
    <item>
      <title>GitHub Actions for Azure</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;How to use GitHub Actions with Azure&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://learn.microsoft.com/azure/developer/github/github-actions"&gt;Documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Authenticate to Azure from GitHub&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://learn.microsoft.com/azure/developer/github/connect-from-azure?tabs=azure-cli%2Clinux"&gt;Documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This workflow is useful when using the &lt;a href="https://github.com/azure/login?tab=readme-ov-file#github-actions-for-deploying-to-azure"&gt;az login action in GitHub Actions&lt;/a&gt;.&lt;/p&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/github-actions-azure</link>
      <guid>https://www.lqdev.me/resources/wiki/github-actions-azure</guid>
      <pubDate>04/23/2024 23:04 -05:00</pubDate>
      <category>github</category>
      <category>cicd</category>
      <category>githubactions</category>
      <category>azure</category>
    </item>
    <item>
      <title>Garbage Collections NixOS</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;One of the nice things about NixOS is, whenever you update the system, old configurations remain in place. That way if something were to go wrong, you can always revert back. However, there are tradeoffs. Each old configuration takes up space on your hard drive. If you're updating your system every week or every few weeks, this adds up. The following is a general guide on how to clean these up.&lt;/p&gt;
&lt;h2&gt;Delete old generations&lt;/h2&gt;
&lt;p&gt;This command deletes every generation, except the most current one.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-env --delete-generations old
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you'd like to keep a few of the most recent ones. Say, from the last 14 days, you can pass an argument.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-env --delete-generations 14d
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Run the garbage collector&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-store --gc
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Use the nix-collect-garbage utility&lt;/h2&gt;
&lt;p&gt;The following utility will delete older generations across all profiles on your system.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;nix-collect-garbage -d
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Resources&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://nixos.org/manual/nix/stable/package-management/garbage-collection.html"&gt;NixOS Garbage Collection&lt;/a&gt;&lt;/p&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/nixos-garbage-collection</link>
      <guid>https://www.lqdev.me/resources/wiki/nixos-garbage-collection</guid>
      <pubDate>03/10/2024 14:01 -05:00</pubDate>
      <category>nixos</category>
      <category>system</category>
      <category>os</category>
      <category>linux</category>
    </item>
    <item>
      <title>Install .NET packages on NixOS from GitHub</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This guide shows how to build a .NET package from GitHub source. The project used to illustrate the process can be found on &lt;a href="https://github.com/lqdev/fitch"&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Create derivation&lt;/h2&gt;
&lt;p&gt;The first thing you'll want to do is create a derivation for your package.&lt;/p&gt;
&lt;p&gt;Create a file for your package. In this case, I called mine &lt;em&gt;fitch.nix&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Since I'm building a .NET package from the GitHub source, I use &lt;code&gt;buildDotnetModule&lt;/code&gt;, &lt;code&gt;dotnetCorePackages&lt;/code&gt;, and &lt;code&gt;fetchFromGithub&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To get the rev, use the &lt;code&gt;git log&lt;/code&gt; command. It's the hash of the latest commit.&lt;/p&gt;
&lt;h2&gt;Fake SHA&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;{
  fetchFromGitHub,
  buildDotnetModule,
  dotnetCorePackages
}:

buildDotnetModule {
  name = &amp;quot;fitch&amp;quot;;

  src = fetchFromGitHub {
    owner = &amp;quot;lqdev&amp;quot;;
    repo = &amp;quot;fitch&amp;quot;;
    rev = &amp;quot;e5fb91ddf57eb5611e0e313af29126e590cd149f&amp;quot;;
    sha256 = &amp;quot;&amp;quot;;
  };

  projectFile = &amp;quot;src/fitch.fsproj&amp;quot;;
  executables = &amp;quot;fitch&amp;quot;;
  dotnet-sdk = dotnetCorePackages.sdk_8_0;
  dotnet-runtime = dotnetCorePackages.runtime_8_0;
  nugetDeps = ./deps.nix;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;At this point the sha256 will be empty because you'll get it later in the process.&lt;/p&gt;
&lt;h2&gt;Create default.nix&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;let
  pkgs = import &amp;lt;nixpkgs&amp;gt; { };
in
{
  fitch = pkgs.callPackage ./fitch.nix { };
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Fetch dependencies&lt;/h2&gt;
&lt;p&gt;Create a file called &lt;code&gt;deps.nix&lt;/code&gt;. This will contain the dependencies you need for your application.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;touch deps.nix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, run &lt;code&gt;nix-build -A fitch.fetch-deps&lt;/code&gt;. This should fail because of the empty SHA.&lt;/p&gt;
&lt;h2&gt;Update SHA&lt;/h2&gt;
&lt;p&gt;The empty SHA will fail. However, the error message will contain the actual SHA value. Copy that and paste it into the sha256 property.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;{
  lib    
  fetchFromGitHub,
  buildDotnetModule,
  dotnetCorePackages
}:

buildDotnetModule {
  name = &amp;quot;fitch&amp;quot;;

  src = fetchFromGitHub {
    owner = &amp;quot;lqdev&amp;quot;;
    repo = &amp;quot;fitch&amp;quot;;
    rev = &amp;quot;e5fb91ddf57eb5611e0e313af29126e590cd149f&amp;quot;;
    sha256 = &amp;quot;74xddAUGQNVliVs5o3zQQEAUAoF9r8iBmiiBr4qrUgw=&amp;quot;;
  };

  projectFile = &amp;quot;src/fitch.fsproj&amp;quot;;
  executables = &amp;quot;fitch&amp;quot;;
  dotnet-sdk = dotnetCorePackages.sdk_7_0;
  dotnet-runtime = dotnetCorePackages.runtime_7_0;
  nugetDeps = ./deps.nix;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Get dependencies&lt;/h2&gt;
&lt;p&gt;Now that you have the correct SHA, try getting the dependencies again. These dependencies are created in a series of steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Run the following command &lt;code&gt;sudo nix-build -A fitch.fetch-deps&lt;/code&gt;. The result of this command is an executable script called &lt;em&gt;result&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Run the &lt;em&gt;result&lt;/em&gt; script. &lt;code&gt;sudo ./result deps.nix&lt;/code&gt;. This will generate the lockfile called &lt;em&gt;deps.nix&lt;/em&gt; and is referenced by the &lt;code&gt;nugetDeps&lt;/code&gt; property.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Build package&lt;/h2&gt;
&lt;p&gt;Once everything is set up, run &lt;code&gt;nix-build -A fitch&lt;/code&gt;. This will package and install the package onto your system.&lt;/p&gt;
&lt;h2&gt;Add to configuration&lt;/h2&gt;
&lt;p&gt;To add the newly built package to your &lt;em&gt;configuration.nix&lt;/em&gt;, add it to your packages:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;environment.systemPackages = with pkgs; [
    #...
    (callPackage ./fitch.nix {})
    #...
];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then, run &lt;code&gt;nixos-rebuild switch&lt;/code&gt;. This should now install the package onto your PC.&lt;/p&gt;
&lt;h2&gt;(Optional) Initialize when shell starts&lt;/h2&gt;
&lt;p&gt;In my case, since I want fitch to run when the terminal starts, I edit my bash configuration in the &lt;em&gt;configuration.nix&lt;/em&gt; file.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;programs.bash = {
    interactiveShellInit = &amp;quot;fitch&amp;quot;;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Sources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://ryantm.github.io/nixpkgs/languages-frameworks/dotnet/"&gt;Dotnet Nixpkgs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wuffs.org/blog/joining-the-nixos-pyramid-scheme"&gt;Joining the NixOS Pyramid Scheme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://nix.dev/tutorials/learning-journey/packaging-existing-software"&gt;Packaging existing software with Nix&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/nixos-dotnet-packages-source</link>
      <guid>https://www.lqdev.me/resources/wiki/nixos-dotnet-packages-source</guid>
      <pubDate>12/17/2023 17:56 -05:00</pubDate>
      <category>dotnet</category>
      <category>nixos</category>
      <category>linux</category>
      <category>sysadmin</category>
      <category></category>
    </item>
    <item>
      <title>Plain text</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This guide provides an overview of plain text and how it can be used for a variety of tasks and advantages over rich text and custom text formats.&lt;/p&gt;
&lt;h2&gt;What is plain text?&lt;/h2&gt;
&lt;p&gt;In general, plain text is text that isn't formatted and generally uses common characters.&lt;/p&gt;
&lt;h2&gt;Benefits of plain text&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Simplicity: Focus on the content rather than the formatting or medium&lt;/li&gt;
&lt;li&gt;Portability: Any text editor can create and display plain text. That means you're not locked in to any particular tool or service.&lt;/li&gt;
&lt;li&gt;Local-first: Because you can create plain text files using any phone or computer, it means your files belong to you and you have access to them any time regardless of network connectivity. While you can upload and sync your files with your preferred cloud storage provider for redundancy and backup, it's not a requirement.&lt;/li&gt;
&lt;li&gt;Longevity: Computers have been able to create and display plain text for decades. Since you don't need proprietary file formats or tools to create and consume plain text, it's likely many decades from now you'll be able to read plain text.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Additional plain markup and text formats&lt;/h2&gt;
&lt;p&gt;You can write plain text on its own. However, you can format your plain text to provide additional visual cues, information, and context. Some popular plain formats and markup languages include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://daringfireball.net/projects/markdown/"&gt;Markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://orgmode.org/worg/org-syntax.html"&gt;Org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.latex-project.org/"&gt;LaTeX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Editors&lt;/h2&gt;
&lt;p&gt;Below are a few popular plain text editors you can use to read and create plain text files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.gnu.org/software/emacs/"&gt;Emacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.vim.org/"&gt;vi/vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://code.visualstudio.com/"&gt;VS Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://apps.microsoft.com/detail/9msmlrh6lzf3?hl=en-us&amp;amp;gl=US"&gt;Notepad&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Use cases&lt;/h2&gt;
&lt;h3&gt;Note taking&lt;/h3&gt;
&lt;p&gt;The easiest way to start taking notes using plain text is to open any text editor of choice and start capturing your thoughts.&lt;/p&gt;
&lt;h3&gt;Productivity / Personal Knowledge Management&lt;/h3&gt;
&lt;p&gt;An extension to note taking is personal knowlege management and productivity. Whether it's scheduling appointments, journaling, tracking habits (exercise, reading, meditation), or managing to-do lists, you can use plain text for these tasks. Some tools and formats that can help with that include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://orgmode.org/"&gt;Emacs Org Mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://todotxt.org/"&gt;todo.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Email&lt;/h3&gt;
&lt;p&gt;While e-mail clients support HTML, in general e-mail communication is predomenantly text-based. Therefore, plain text is all you need. If you wanted to only use plain text, e-mail clients enable you to configure them to only support plain text. While your HTML e-mails may look weird, there are some advantages.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://useplaintext.email/"&gt;use plaintext email guide&lt;/a&gt; can provide guidance as to how to get started using plaintext only for e-mails&lt;/p&gt;
&lt;h3&gt;Personal finance&lt;/h3&gt;
&lt;p&gt;There are many apps for managing your personal finance. However, if you want to keep it simple, you can track your personal finances using plain text as well. Some tools that can help you do that include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://ledger-cli.org/"&gt;Ledger&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Databases&lt;/h3&gt;
&lt;p&gt;When you think of a database, you might think of a complicated system hosted in a server. While database systems are optimized for enterprise production workloads, at the end of the day, the purpose of a database is to store data. That means plain text can work for that too. Some tools that can help you here include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.gnu.org/software/recutils/"&gt;GNU Recutils&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Blogging and building websites&lt;/h3&gt;
&lt;p&gt;The more capable our computing devices have become, our software has suffered from inflation by becoming larger. However, larger doesn't mean the software is richer. If you're just trying to transmit information, you can upload your raw text files containing your blog posts or website to a server and they can be displayed in the browser. Examples of these sites include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://minim.blog/"&gt;minim.blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://250kb.club/"&gt;250kb club&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://512kb.club/"&gt;512kb club&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Often you can build these websites with the help of static site generators such as. The &lt;a href="https://jamstack.org/generators/"&gt;Static Site Generators catalog&lt;/a&gt; provides more details on popular ones.&lt;/p&gt;
&lt;p&gt;For hosting, you can do so for free using offerings like GitHub Pages. The &lt;a href="https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll"&gt;Setting up a GitHub Pages site with Jekyll&lt;/a&gt; can help you get started there.&lt;/p&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://plaintext-productivity.net"&gt;Plaintext Productivity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://plaintextproject.online/articles.html"&gt;The Plain Text Project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://doc.norang.ca/org-mode.html"&gt;Org Mode - Organize Your Life In Plain Text!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.markwk.com/plain-text-life.html"&gt;The Plain Text Life: Note Taking, Writing and Life Organization Using Plain Text Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sive.rs/plaintext"&gt;Write plain text files&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/plaintext</link>
      <guid>https://www.lqdev.me/resources/wiki/plaintext</guid>
      <pubDate>10/14/2023 12:56 -05:00</pubDate>
      <category>plaintext</category>
      <category>productivity</category>
      <category>email</category>
      <category>notes</category>
      <category>personalknowledgemanagement</category>
      <category>pkm</category>
      <category>wiki</category>
      <category>calendar</category>
      <category>finance</category>
      <category>tools</category>
      <category>databases</category>
      <category>writing</category>
    </item>
    <item>
      <title>Running Waydroid on NixOS using X11</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;h2&gt;Packages&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://search.nixos.org/packages?channel=23.05&amp;amp;show=weston&amp;amp;from=0&amp;amp;size=50&amp;amp;sort=relevance&amp;amp;type=packages&amp;amp;query=weston"&gt;weston&lt;/a&gt; - Wayland compositor&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;NixOS Configuration&lt;/h2&gt;
&lt;pre&gt;&lt;code class="language-nix"&gt;virtualisation = {
    waydroid = {
        enable = true;
    };
};

environment.systemPackages = with pkgs; [weston];
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Initialize Waydroid&lt;/h3&gt;
&lt;p&gt;This downloads the LineageOS image and installs it&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;# Fetch WayDroid images.
# You can add the parameters &amp;quot;-s GAPPS -f&amp;quot; to have GApps support.
sudo waydroid init
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Start Waydroid&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Open the terminal and start the waydroid container&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl start waydroid-container
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Check status of container&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo journalctl -u waydroid-container
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Open terminal and start weston&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;weston
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In the weston window, open a terminal and start Waydroid sesson in the background&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;waydroid session start &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Start the UI&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;waydroid show-full-ui
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Stop Waydroid&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Close weston window&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Stop waydroid container&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl stop waydroid-container
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;Remove user data&lt;/h4&gt;
&lt;p&gt;Only do this if you don't want to persist anything from that container&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;# Removing images and user data
sudo rm -r /var/lib/waydroid/* ~/.local/share/waydroid
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Update Android&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo waydroid upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;General Usage&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;# Start Android UI
waydroid show-full-ui

# List Android apps
waydroid app list

# Start an Android app
waydroid app launch &amp;lt;application name&amp;gt;

# Install an Android app
waydroid app install &amp;lt;/path/to/app.apk&amp;gt;

# Enter the LXC shell
sudo waydroid shell

# Overrides the full-ui width
waydroid prop set persist.waydroid.width 608
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://nixos.wiki/wiki/WayDroid"&gt;NixOS Wiki - WayDroid&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://unix.stackexchange.com/questions/732485/script-to-start-android-lineageos-with-waydroid-in-an-x11-session"&gt;Script to start LineageOS on X11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/waydroid/waydroid/issues/195#issuecomment-953926526"&gt;Any plan to support X11?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/waydroid-nixos-x11</link>
      <guid>https://www.lqdev.me/resources/wiki/waydroid-nixos-x11</guid>
      <pubDate>10/05/2023 22:25 -05:00</pubDate>
      <category>android</category>
      <category>linux</category>
      <category>nixos</category>
      <category>x11</category>
      <category>waydroid</category>
    </item>
    <item>
      <title>Matrix Synapse Server Administration</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;The following is a guide for managing &lt;a href="https://github.com/matrix-org/synapse"&gt;Matrix Synapse&lt;/a&gt; servers.&lt;/p&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Initialize Python virtual environment&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;source env/bin/activate
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Stop server&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;synctl stop
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Upgrade Synapse package&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;pip install --upgrade matrix-synapse[postgres]
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Restart server&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;synctl restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deactivate Python virtual environment&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Check version&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;curl http://localhost:8008/_synapse/admin/v1/server_version
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Clean up storage&lt;/h2&gt;
&lt;h3&gt;Delete old media&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Run the following command to clean local meadia older than 30 days.&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;curl -X POST -H &amp;quot;Authorization: Bearer access_token&amp;quot; http://localhost:8008/_synapse/admin/v1/media/delete?before_ts=$(date +%s000 --date &amp;quot;30 days ago&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Start PSQL&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;psql
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Connect to database&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-sql"&gt;\c synapse
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Clean up unreferenced itemes&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;VACUUM FULL;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Delete items in database&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Start PSQL&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;psql
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Connect to database&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-sql"&gt;\c synapse
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run the following SQL script&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-sql"&gt;DROP FUNCTION IF EXISTS synapse_clean_redacted_messages();
CREATE FUNCTION synapse_clean_redacted_messages()
    RETURNS void AS $$
    DECLARE
    BEGIN
        UPDATE events SET content = '{}' FROM redactions AS rdc
            WHERE events.event_id = rdc.redacts
            AND (events.type = 'm.room.encrypted' OR events.type = 'm.room.message');
    END;
$$ LANGUAGE 'plpgsql';

DROP FUNCTION IF EXISTS synapse_get_server_name();
CREATE FUNCTION synapse_get_server_name()
    RETURNS text AS $$
    DECLARE
        _someUser TEXT;
        _serverName TEXT;
    BEGIN
        select user_id from account_data limit 1 INTO _someUser;
        select regexp_replace(_someUser, '^.*:', ':') INTO _serverName;
        RETURN _serverName;
    END;
$$ LANGUAGE 'plpgsql';

DROP FUNCTION IF EXISTS synapse_get_unused_rooms();
CREATE FUNCTION synapse_get_unused_rooms()
    RETURNS TABLE(room_id TEXT) AS $$
    DECLARE
    BEGIN
        RETURN QUERY SELECT r.room_id FROM rooms AS r WHERE r.room_id NOT IN (
            SELECT DISTINCT(m.room_id) FROM room_memberships as m
                INNER JOIN current_state_events as c
                ON m.event_id = c.event_id
                AND m.room_id = c.room_id
                AND m.user_id = c.state_key
                WHERE c.type = 'm.room.member'
                AND m.membership = 'join'
                AND m.user_id LIKE concat('%', synapse_get_server_name())
        );
    END;
$$ LANGUAGE 'plpgsql';

DROP FUNCTION IF EXISTS synapse_clean_unused_rooms();
CREATE FUNCTION synapse_clean_unused_rooms()
    RETURNS void AS $$
    DECLARE
        _count INT;
    BEGIN
        CREATE TEMP TABLE synapse_clean_unused_rooms__tmp
            ON COMMIT DROP
            AS SELECT room_id FROM synapse_get_unused_rooms();

        SELECT COUNT(*) FROM synapse_clean_unused_rooms__tmp INTO _count;
        RAISE NOTICE 'synapse_clean_unused_rooms() Cleaning up % unused rooms', _count;

        DELETE FROM event_forward_extremities AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_forward_extremities';

        DELETE FROM event_backward_extremities AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_backward_extremities';

        DELETE FROM event_edges AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_edges';

        DELETE FROM room_depth AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_depth';

        DELETE FROM events AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: events';

        DELETE FROM event_json AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_json';

        DELETE FROM state_events AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: state_events';

        DELETE FROM current_state_events AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: current_state_events';

        DELETE FROM room_memberships AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_memberships';

        DELETE FROM destination_rooms AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: destination_rooms';

        DELETE FROM event_failed_pull_attempts AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_failed_pull_attempts';

        DELETE FROM rooms AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: rooms';

        DELETE FROM room_aliases AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_aliases';

        DELETE FROM state_groups AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: state_groups';

        DELETE FROM state_groups_state AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: state_groups_state';

        DELETE FROM receipts_graph AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: receipts_graph';

        DELETE FROM receipts_linearized AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: receipts_linearized';

        DELETE FROM room_tags AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_tags';

        DELETE FROM room_tags_revisions AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_tags_revisions';

        DELETE FROM room_account_data AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: room_account_data';

        DELETE FROM event_push_actions AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_push_actions';

        DELETE FROM pusher_throttle AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: pusher_throttle';

        DELETE FROM event_reports AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_reports';

        DELETE FROM stream_ordering_to_exterm AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: stream_ordering_to_exterm';

        DELETE FROM event_auth AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: event_auth';

        DELETE FROM appservice_room_list AS x WHERE x.room_id IN (SELECT y.room_id FROM synapse_clean_unused_rooms__tmp AS y);
        RAISE NOTICE 'DONE: appservice_room_list';
    END;
$$ LANGUAGE 'plpgsql';

SELECT synapse_clean_redacted_messages();
SELECT synapse_clean_unused_rooms();
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Clean up unreferenced tuples&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-sql"&gt;VACUUM FULL;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://matrix-org.github.io/synapse/latest/welcome_and_overview.html"&gt;Matrix Synapse Docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://matrix-org.github.io/synapse/latest/upgrade.html"&gt;Upgrading Synapse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://matrix-org.github.io/synapse/v1.38/admin_api/media_admin_api.html"&gt;Admin Media API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/xwiki-labs/synapse_scripts"&gt;Synapse Scripts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/matrix-synapse-admin</link>
      <guid>https://www.lqdev.me/resources/wiki/matrix-synapse-admin</guid>
      <pubDate>06/11/2023 21:13 -05:00</pubDate>
      <category>messaging</category>
      <category>how-to</category>
      <category>matrix</category>
      <category>self-host</category>
      <category>synapse</category>
      <category>sql</category>
      <category>python</category>
    </item>
    <item>
      <title>Linux ls Commands</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;An overview of &lt;code&gt;ls&lt;/code&gt; Linux commands&lt;/p&gt;
&lt;h2&gt;ls&lt;/h2&gt;
&lt;p&gt;Display information about a directory and its contents&lt;/p&gt;
&lt;h2&gt;lscpu&lt;/h2&gt;
&lt;p&gt;Display information about the CPU architecture&lt;/p&gt;
&lt;h2&gt;lsgpu&lt;/h2&gt;
&lt;p&gt;Display information about GPU architecture&lt;/p&gt;
&lt;h2&gt;lsblk&lt;/h2&gt;
&lt;p&gt;Display information about block devices&lt;/p&gt;
&lt;h2&gt;lsmem&lt;/h2&gt;
&lt;p&gt;List ranges of available memory with their online status.&lt;/p&gt;
&lt;h2&gt;lspci&lt;/h2&gt;
&lt;p&gt;Display information about PCI devices&lt;/p&gt;
&lt;h2&gt;lsusb&lt;/h2&gt;
&lt;p&gt;Display information about USB devices&lt;/p&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/linux-ls-commands</link>
      <guid>https://www.lqdev.me/resources/wiki/linux-ls-commands</guid>
      <pubDate>01/02/2023 15:22 -05:00</pubDate>
      <category>linux</category>
      <category>commandline</category>
      <category>cli</category>
      <category>hardware</category>
      <category>software</category>
    </item>
    <item>
      <title>Configure opacity - Manjaro</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This article shows how to configure background opacity for the kitty terminal emulator using picom and i3.&lt;/p&gt;
&lt;p&gt;By defaut, i3 doesn't support composting. Programs like picom add support for it.&lt;/p&gt;
&lt;p&gt;In addition, terminal emulators like kitty are hardware accelerated which means there's opportunities to offload from the CPU and save power.&lt;/p&gt;
&lt;h2&gt;Install &amp;amp; configure picom&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Install picom&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo pacman -S picom
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Move default configuration file to &lt;em&gt;~/.config/picom/picom.conf&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Define opacity rule:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;opacity-rule = [&amp;quot;90:class_g = 'kitty'&amp;quot;];
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Save changes&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Install &amp;amp; configure kitty&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Install picom&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo pacman -S kitty
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Move default configuration file to &lt;em&gt;~/.config/kitty/kitty.conf&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Set background opacity:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;background_opacity 0.90
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Save changes&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Configure i3&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Open your i3 configuration and add the following line to it:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;exec_always picom
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Restart i3.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/title/Picom#Opacity"&gt;Picom&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/title/Kitty"&gt;Kitty&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.reddit.com/r/i3wm/comments/g62qy0/kitty_terminal_emulator_transparency_not_working/"&gt;Kitty emulator not working - Reddit&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/configure-opacity-manjaro</link>
      <guid>https://www.lqdev.me/resources/wiki/configure-opacity-manjaro</guid>
      <pubDate>12/11/2022 18:56 -05:00</pubDate>
      <category>i3</category>
      <category>wm</category>
      <category>linux</category>
      <category>manjaro</category>
      <category>kitty</category>
      <category>terminal</category>
      <category>wiki</category>
      <category>configuration</category>
      <category>picom</category>
    </item>
    <item>
      <title>Intel GPU Tools - Linux</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This article talks about Intel GPU tools for Linux to monitor usage of integrated Intel GPUs&lt;/p&gt;
&lt;h2&gt;When to use&lt;/h2&gt;
&lt;p&gt;The scenarios in which I've used this tool is to confirm that my browser is leveraging hardware acceleration. By default, Firefox doesn't enable hardware acceleration on Linux. As a result, everything runs on the CPU causing unnecessary load and faster battery drain. To alleviate that, you can enable hardware acceleration and make sure that the GPU is being used by running tools like &lt;code&gt;intel_gpu_top&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Install&lt;/h2&gt;
&lt;p&gt;To install the tools, run the following command&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo pacman -S intel-gpu-tools
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Run intel_gpu_top&lt;/h2&gt;
&lt;p&gt;To view GPU activity, run the following command:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo intel_gpu_top
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This will display process graphs of GPU usage.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/title/Intel_graphics"&gt;Intel Grapics - Arch Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://archlinux.org/packages/community/x86_64/intel-gpu-tools/"&gt;Intel GPU Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://support.mozilla.org/en-US/kb/upgrade-graphics-drivers-use-hardware-acceleration"&gt;Firefox hardware acceleration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://support.mozilla.org/en-US/kb/performance-settings"&gt;Firefox Performance Settings&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/intel-gpu-tools</link>
      <guid>https://www.lqdev.me/resources/wiki/intel-gpu-tools</guid>
      <pubDate>12/11/2022 18:05 -05:00</pubDate>
      <category>linux</category>
      <category>intel</category>
      <category>gpu</category>
      <category>manjaro</category>
      <category>performances</category>
    </item>
    <item>
      <title>Hardware Video Acceleration - Linux</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;This article talks about using hardware video acceleration so the video card encodes/decodes video offloading the CPU and saving power.&lt;/p&gt;
&lt;h2&gt;Install intel-media-driver&lt;/h2&gt;
&lt;p&gt;To install the Intel media driver&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo pacman -S intel-media-driver
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Enable acceleration MPV&lt;/h2&gt;
&lt;p&gt;For mpv, make sure that decoding and video acceleration is enabled. To do so:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Create or edit the user config file in &lt;em&gt;~/.config/mpv/mpv.conf&lt;/em&gt; with the following settings:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;vo=gpu
hwdec=auto
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Reboot your PC.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Verification&lt;/h2&gt;
&lt;p&gt;Use &lt;code&gt;intel_gpu_top&lt;/code&gt; and make sure that when you play video using tools like VLC or MPV, the video bar is active.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/title/Hardware_video_acceleration"&gt;Hardware Video Acceleration - Intel GPU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.lqdev.me/resources/wiki/intel-gpu-tools"&gt;Intel GPU Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/mpv-player/mpv/blob/master/etc/mpv.conf"&gt;Sample MPV Conf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mpv.io/manual/master/#configuration-files"&gt;MPV Configuration Files&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/video-hardware-acceleration-linux</link>
      <guid>https://www.lqdev.me/resources/wiki/video-hardware-acceleration-linux</guid>
      <pubDate>12/11/2022 17:36 -05:00</pubDate>
      <category>performance</category>
      <category>wiki</category>
      <category>hardware</category>
      <category>video</category>
      <category>hardwareacceleration</category>
      <category>linux</category>
      <category>arch</category>
      <category>manjaro</category>
    </item>
    <item>
      <title>Power Management Manjaro</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;The following shows how you can optimize your computer using Powertop to generate runing recommendations and apply those optimizations at boot using an rc-local service.&lt;/p&gt;
&lt;h2&gt;Powertop&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Install powertop&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo pacman -S powertop
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run powertop report (on battery power)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo powertop -r
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After a few seconds, a file called &lt;em&gt;powertop.html&lt;/em&gt; is created.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Open the &lt;em&gt;powertop.html&lt;/em&gt; file in your browser and inspect the &lt;strong&gt;Tuning&lt;/strong&gt; tab for tuning recommendations.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Configure rc-local service&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Create &lt;em&gt;rc.local&lt;/em&gt; file in &lt;code&gt;/etc&lt;/code&gt; directory with the following content&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;#!/bin/sh -e

echo &amp;quot;Hello World&amp;quot;

# Insert powertop optimization scripts here. 

exit 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create &lt;em&gt;rc-local.service&lt;/em&gt; file in &lt;code&gt;/etc/systemd/system&lt;/code&gt; directory with the following content&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;#  This file is part of systemd.
#
#  systemd is free software; you can redistribute it and/or modify it
#  under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.

[Unit]
Description=/etc/rc.local Compatibility
ConditionPathExists=/etc/rc.local

[Service]
Type=oneshot
ExecStart=/etc/rc.local
TimeoutSec=0
StandardOutput=tty
RemainAfterExit=yes
SysVStartPriority=99

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Enable and start rc-local service&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl enable rc-local
sudo systemctl start rc-local
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Confirm that the service has successfully started&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;sudo systemctl status rc-local
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/title/Powertop"&gt;Arch Wiki - Powertop&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/power-management-manjaro</link>
      <guid>https://www.lqdev.me/resources/wiki/power-management-manjaro</guid>
      <pubDate>12/11/2022 16:15 -05:00</pubDate>
      <category>manjaro</category>
      <category>bash</category>
      <category>powermanagement</category>
      <category>tech</category>
      <category>wiki</category>
      <category>linux</category>
    </item>
    <item>
      <title>Commonplace Book</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;A way to store notes and knowledge discovered and learned. This can include quotes from books, articles, courses, and any other sources of information.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Commonplace_book"&gt;Commonplace Book&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://evernote.com/blog/how-to-create-commonplace-with-evernote/"&gt;Taking Note: How To Create a Commonplace with Evernote&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://medium.com/read-smart/what-is-a-commonplace-book-db392bda730c"&gt;What is a commonplace book?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stevenberlinjohnson.com/the-glass-box-and-the-commonplace-book-639b16c4f3bb"&gt;The Glass Box and The Commonplace Book&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/commonplace-book</link>
      <guid>https://www.lqdev.me/resources/wiki/commonplace-book</guid>
      <pubDate>09/04/2022 20:25 -05:00</pubDate>
      <category>knowledgemanagement</category>
      <category>commonplace</category>
      <category>notetaking</category>
      <category>information</category>
      <category>technology</category>
      <category>internet</category>
      <category>books</category>
    </item>
    <item>
      <title>Markdig Advanced Extensions</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;Markdig advanced extensions are a series of CommonMark compliant syntax extensions for the markdown language.&lt;/p&gt;
&lt;h2&gt;Task lists&lt;/h2&gt;
&lt;p&gt;Tasks lists allow you to create unorder list items with checkboxes.&lt;/p&gt;
&lt;h3&gt;Syntax&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-markdown"&gt;- [ ] Item1
- [x] Item2
- [ ] Item3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Output&lt;/h3&gt;
&lt;ul class="contains-task-list"&gt;
&lt;li class="task-list-item"&gt; Item1&lt;/li&gt;
&lt;li class="task-list-item"&gt; Item2&lt;/li&gt;
&lt;li class="task-list-item"&gt; Item3&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Tables&lt;/h2&gt;
&lt;h3&gt;Pipe tables&lt;/h3&gt;
&lt;h4&gt;Syntax&lt;/h4&gt;
&lt;pre&gt;&lt;code class="language-markdown"&gt;| a | b | c
| - | - | - 
| 1 | 2 | 3
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;Output&lt;/h4&gt;
&lt;p&gt;a&lt;/p&gt;
&lt;p&gt;b&lt;/p&gt;
&lt;p&gt;c&lt;/p&gt;
&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;2&lt;/p&gt;
&lt;p&gt;3&lt;/p&gt;
&lt;h2&gt;Diagrams&lt;/h2&gt;
&lt;p&gt;Support for diagram syntax such as &lt;a href="https://mermaid-js.github.io/mermaid/"&gt;Mermaid&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Syntax&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-markdown"&gt;```mermaid
flowchart LR
    Start --&amp;gt; Stop
```
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Output&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-mermaid"&gt;flowchart LR;
    Start --&amp;gt; Stop;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Emojis&lt;/h2&gt;
&lt;p&gt;Support for emojis.&lt;/p&gt;
&lt;h3&gt;Syntax&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-markdown"&gt;We all need :), it makes us :muscle:. (and :ok_hand:).
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Output&lt;/h3&gt;
&lt;p&gt;We all need , it makes us . (and ).&lt;/p&gt;
&lt;h2&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/xoofx/markdig/tree/master/src/Markdig.Tests/Specs"&gt;Markdig Specs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/markdig-advanced-extensions</link>
      <guid>https://www.lqdev.me/resources/wiki/markdig-advanced-extensions</guid>
      <pubDate>09/03/2022 19:26 -05:00</pubDate>
      <category>markdown</category>
      <category>markdig</category>
      <category>dotnet</category>
      <category>fsharp</category>
      <category>csharp</category>
      <category>website</category>
    </item>
    <item>
      <title>Unicode Emojis</title>
      <description>&lt;![CDATA[&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;Unicode emoji characters and sequences.&lt;/p&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;h3&gt;Unicode&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-html"&gt;&amp;lt;span&amp;gt;&amp;amp;#x1F642;&amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;CLDR Name&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-markdown"&gt;I am :slightly_smiling_face:
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I am &lt;/p&gt;
&lt;h2&gt;Emoji List&lt;/h2&gt;
&lt;p&gt;Emoji&lt;/p&gt;
&lt;p&gt;Unicode&lt;/p&gt;
&lt;p&gt;CLDR Name&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F642&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:slightly_smiling_face:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F602&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:joy:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F643&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:upside_down_face:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F611&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:expressionless:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F644&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:roll_eyes:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F92E&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:vomiting_face:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F92F&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:exploding_head:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F615&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:confused:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F641&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:slightly_frowning_face:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F62E&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:open_mouth:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F621&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:rage:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F47B&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:ghost:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F47D&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:alien:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F916&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:robot:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+2764&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:heart:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;:bison:&lt;/p&gt;
&lt;p&gt;U+1F9AC&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:bison:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;:bagel:&lt;/p&gt;
&lt;p&gt;U+1F96F&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:bagel:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F37F&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:popcorn:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F37A&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:beer:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F3DC&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:desert:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F680&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:rocket:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F6F8&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:flying_saucer:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+23F0&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:alarm_clock:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F30C&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:milky_way:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F525&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:fire:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F383&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:jack_o_lantern:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F3C8&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:football:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F3A7&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:headphones:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4FB&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:radio:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4BB&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:computer:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4D6&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:book:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4D3&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:notebook:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F516&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:bookmark:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4F0&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:newspaper:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F3F7&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:label:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+2709&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:envelope:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+270F&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:pencil2:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4DD&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:memo:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F4CD&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:round_pushpin:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F512&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:lock:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F510&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:closed_lock_with_key:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F517&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:link:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;U+1F64B&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:raising_hand_man:&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://unicode.org/emoji/charts/full-emoji-list.html"&gt;Full Emojis List, v14.0&lt;/a&gt;&lt;/p&gt;
]]&gt;</description>
      <link>https://www.lqdev.me/resources/wiki/unicode-emojis</link>
      <guid>https://www.lqdev.me/resources/wiki/unicode-emojis</guid>
      <pubDate>09/03/2022 19:26 -05:00</pubDate>
      <category>technology</category>
      <category>web</category>
      <category>unicode</category>
      <category>internet</category>
      <category>opensource</category>
      <category>emojis</category>
    </item>
  </channel>
</rss>