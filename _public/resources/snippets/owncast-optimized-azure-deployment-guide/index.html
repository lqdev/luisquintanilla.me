<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" href="/assets/css/custom/main.css"><link rel="stylesheet" href="/assets/css/custom/timeline.css"><link rel="stylesheet" href="/assets/css/bootstrap-icons-1.5.0/bootstrap-icons.css"><link rel="stylesheet" href="/assets/css/highlight.github-dark-dimmed.min.css"><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="/lib/revealjs/dist/reveal.css"><link rel="stylesheet" href="/lib/revealjs/dist/theme/black.css"><link rel="stylesheet" href="/lib/revealjs/plugin/highlight/monokai.css"><meta property="og:title" content="Snippet | Deploy Owncast to Azure Container Apps with Persistent Storage | Luis Quintanilla"><meta property="og:type" content="website"><meta property="og:image" content="https://www.lqdev.me/avatar.png"><meta property="og:image:secure_url" content="https://www.lqdev.me/avatar.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="200"><meta property="og:image:height" content="200"><meta property="og:site_name" content="Luis Quintanilla Personal Website"><meta property="og:locale" content="en_US"><meta property="twitter:image" content="https://www.lqdev.me/avatar.png"><meta property="fediverse:creator" content="@lqdev@toot.lqdev.tech"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Blog RSS Feed" href="/blog.rss"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Microblog RSS Feed" href="/microblog.rss"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Response RSS Feed" href="/responses.rss"><link rel="webmention" title="Luis Quintanilla Webmention Endpoint" href="https://webmentions.lqdev.tech/api/inbox"><link rel="feeds" type="text/xml" title="Luis Quintanilla&#39;s Feeds" href="/feed/index.opml"><link rel="blogroll" type="text/xml" title="Luis Quintanilla&#39;s Blogroll" href="/collections/blogroll/index.opml"><link rel="podroll" type="text/xml" title="Luis Quintanilla&#39;s Podroll" href="/collections/podroll/index.opml"><link rel="youtuberoll" type="text/xml" title="Luis Quintanilla&#39;s YouTube Roll" href="/collections/youtube/index.opml"><meta name="robots" content="nosnippet"><title>Snippet | Deploy Owncast to Azure Container Apps with Persistent Storage | Luis Quintanilla</title></head><body><button class="mobile-toggle" id="mobile-nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false"><div class="hamburger"><span></span><span></span><span></span></div></button><div class="nav-overlay" id="nav-overlay"></div><nav class="desert-nav" id="sidebar-menu" role="navigation" aria-label="Main navigation"><div class="nav-brand"><a href="/" class="brand-text"><img src="/avatar.png" alt="Luis Quintanilla avatar" loading="lazy">Luis Quintanilla</a></div><div class="nav-section"><a class="nav-link" href="/"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"></path></svg>Home</a><a class="nav-link" href="/about"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>About</a><a class="nav-link" href="/contact"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"></path></svg>Contact</a><a class="nav-link" href="/search"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg>Search</a><a class="nav-link" href="/feed"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"></path></svg>Subscribe</a></div><div class="nav-section dropdown"><button class="nav-link dropdown-toggle" data-target="collections-dropdown"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg>Collections<svg class="dropdown-arrow" viewBox="0 0 16 16" fill="currentColor"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path></svg></button><div class="dropdown-menu" id="collections-dropdown"><a class="dropdown-item" href="/collections/blogroll">Blogroll</a><a class="dropdown-item" href="/collections/podroll">Podroll</a><a class="dropdown-item" href="/collections/youtube">YouTube</a><a class="dropdown-item" href="/collections/forums">Forums</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/collections/starter-packs">Starter Packs</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/radio">Radio</a><a class="dropdown-item" href="/tags">Tags</a></div></div><div class="nav-section dropdown"><button class="nav-link dropdown-toggle" data-target="resources-dropdown"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"></path></svg>Resources<svg class="dropdown-arrow" viewBox="0 0 16 16" fill="currentColor"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path></svg></button><div class="dropdown-menu" id="resources-dropdown"><a class="dropdown-item" href="/resources/snippets">Snippets</a><a class="dropdown-item" href="/resources/wiki">Wiki</a><a class="dropdown-item" href="/resources/presentations">Presentations</a></div></div><div class="theme-toggle"><button class="theme-toggle-btn" id="theme-toggle" aria-label="Toggle dark mode"><span id="theme-toggle-icon">☀️</span><span>Theme</span></button></div></nav><main role="main" class="main-content" id="main-content"><div class="content-wrapper"><div class="mr-auto"><article class="h-entry individual-post"><header class="post-header"><h1 class="p-name post-title">Deploy Owncast to Azure Container Apps with Persistent Storage</h1><div class="post-meta"><time class="dt-published" datetime="2025-08-14 13:35 -05:00">August 14, 2025</time></div><div class="u-author h-card microformat-hidden"><img src="/avatar.png" class="u-photo" alt="Luis Quintanilla" /><a href="/about" class="u-url p-name">Luis Quintanilla</a></div></header><div class="e-content post-content"><h2>Description</h2>
<p>This guide shows how to deploy Owncast to Azure Container Apps with persistent storage, scale-to-zero capability, and proper SQLite compatibility to minimize costs while ensuring reliable operation.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>Ultra-cost-optimized configuration (~$0.60/month for 4 hours of streaming)</li>
<li>Full data persistence (users, chat, federation, configuration)</li>
<li>Scale-to-zero capability when not streaming</li>
<li>SQLite + Azure Files compatibility fixes</li>
<li>RTMP + HTTP dual-port configuration for OBS Studio</li>
</ul>
<h2>Prerequisites</h2>
<ul>
<li>Azure CLI installed and logged in</li>
<li>An Azure subscription</li>
<li>A resource group created</li>
</ul>
<h2>Step 1: Create Required Resources</h2>
<h3>Create Storage Account for Persistent Data</h3>
<pre><code class="language-bash"># Set variables (choose cheapest regions)
RESOURCE_GROUP=&quot;your-resource-group&quot;
LOCATION=&quot;centralus&quot;  # Often cheaper than eastus
STORAGE_ACCOUNT=&quot;owncaststorage$(date +%s)&quot;  # Must be globally unique
CONTAINER_APP_ENV=&quot;owncast-env&quot;
CONTAINER_APP_NAME=&quot;owncast-app&quot;
<h1>Create MINIMAL cost storage account</h1>
<p>az storage account create <br />
--name $STORAGE_ACCOUNT <br />
--resource-group $RESOURCE_GROUP <br />
--location $LOCATION <br />
--sku Standard_LRS <br />
--kind StorageV2 <br />
--access-tier Cool <br />
--allow-blob-public-access false <br />
--https-only true <br />
--min-tls-version TLS1_2</p>
<h1>Create file share with minimal provisioned size</h1>
<p>az storage share create <br />
--name &quot;owncast-data&quot; <br />
--account-name $STORAGE_ACCOUNT <br />
--quota 1  # Start with 1GB, scales automatically
</code></pre></p>
<h3>Create Container Apps Environment</h3>
<pre><code class="language-bash"># Create the Container Apps environment
az containerapp env create \
  --name $CONTAINER_APP_ENV \
  --resource-group $RESOURCE_GROUP \
  --location $LOCATION
</code></pre>
<h2>Step 2: Configure Storage Mount</h2>
<p>Get the storage account key and create the storage mount:</p>
<pre><code class="language-bash"># Get storage account key
STORAGE_KEY=$(az storage account keys list \
  --account-name $STORAGE_ACCOUNT \
  --resource-group $RESOURCE_GROUP \
  --query &quot;[0].value&quot; -o tsv)
<h1>Create storage mount in the environment</h1>
<p>az containerapp env storage set <br />
--name $CONTAINER_APP_ENV <br />
--resource-group $RESOURCE_GROUP <br />
--storage-name &quot;owncast-storage&quot; <br />
--azure-file-account-name $STORAGE_ACCOUNT <br />
--azure-file-account-key $STORAGE_KEY <br />
--azure-file-share-name &quot;owncast-data&quot; <br />
--access-mode ReadWrite
</code></pre></p>
<h2>Step 3: Deploy Owncast Container App</h2>
<p>Create the container app with persistent storage:</p>
<pre><code class="language-bash">az containerapp create \
  --name $CONTAINER_APP_NAME \
  --resource-group $RESOURCE_GROUP \
  --environment $CONTAINER_APP_ENV \
  --image &quot;owncast/owncast:latest&quot; \
  --target-port 8080 \
  --ingress external \
  --min-replicas 0 \
  --max-replicas 1 \
  --cpu 0.5 \
  --memory 1Gi \
  --volume-mount &quot;data:/app/data&quot; \
  --volume-name &quot;data&quot; \
  --volume-storage-name &quot;owncast-storage&quot; \
  --volume-storage-type AzureFile
</code></pre>
<h2>Step 4: Configure Dual-Port Ingress (HTTP + RTMP)</h2>
<p>For Owncast to work properly, you need both HTTP (8080) and RTMP (1935) ports. This requires a <strong>Virtual Network (VNet)</strong> integration:</p>
<h3>Create VNet and Subnet</h3>
<pre><code class="language-bash"># Create MINIMAL virtual network (smallest possible address space)
az network vnet create \
  --name &quot;owncast-vnet&quot; \
  --resource-group $RESOURCE_GROUP \
  --location $LOCATION \
  --address-prefix &quot;10.0.0.0/24&quot;  # Smaller than default /16
<h1>Create minimal subnet</h1>
<p>az network vnet subnet create <br />
--name &quot;container-apps-subnet&quot; <br />
--resource-group $RESOURCE_GROUP <br />
--vnet-name &quot;owncast-vnet&quot; <br />
--address-prefix &quot;10.0.0.0/27&quot;  # Only 32 IPs instead of /23 (512 IPs)
</code></pre></p>
<h3>Recreate Container Apps Environment with VNet</h3>
<pre><code class="language-bash"># Get subnet ID
SUBNET_ID=$(az network vnet subnet show \
  --name &quot;container-apps-subnet&quot; \
  --vnet-name &quot;owncast-vnet&quot; \
  --resource-group $RESOURCE_GROUP \
  --query id -o tsv)
<h1>Delete existing environment and recreate with VNet</h1>
<p>az containerapp env delete <br />
--name $CONTAINER_APP_ENV <br />
--resource-group $RESOURCE_GROUP <br />
--yes</p>
<h1>Create Container Apps environment with workload profiles DISABLED (cheapest option)</h1>
<p>az containerapp env create <br />
--name $CONTAINER_APP_ENV <br />
--resource-group $RESOURCE_GROUP <br />
--location $LOCATION <br />
--infrastructure-subnet-resource-id $SUBNET_ID <br />
--enable-workload-profiles false  # Forces consumption-only pricing
</code></pre></p>
<h3>Deploy Container App with MINIMAL Resources</h3>
<pre><code class="language-bash">az containerapp create \
  --name $CONTAINER_APP_NAME \
  --resource-group $RESOURCE_GROUP \
  --environment $CONTAINER_APP_ENV \
  --image &quot;owncast/owncast:latest&quot; \
  --target-port 8080 \
  --exposed-port 1935 \
  --ingress external \
  --transport auto \
  --min-replicas 0 \
  --max-replicas 1 \
  --cpu 0.25 \
  --memory 0.5Gi \
  --volume-mount &quot;data:/app/data&quot; \
  --volume-name &quot;data&quot; \
  --volume-storage-name &quot;owncast-storage&quot; \
  --volume-storage-type AzureFile
</code></pre>
<p><strong>Cost-Optimized Resource Allocation:</strong></p>
<ul>
<li><strong>CPU</strong>: 0.25 cores (minimum allowed, sufficient for small streams)</li>
<li><strong>Memory</strong>: 0.5Gi (minimum allowed, will work for basic streaming)</li>
<li><strong>Scaling</strong>: Aggressive scale-to-zero with max 1 replica</li>
</ul>
<h2>Ultra Low-Cost Alternative YAML Configuration</h2>
<p>For maximum cost optimization, use this YAML approach with the smallest possible resource allocation. This configuration includes critical SQLite compatibility fixes for Azure Files:</p>
<pre><code class="language-yaml"># owncast-production-ready.yaml
properties:
  configuration:
    ingress:
      external: true
      targetPort: 8080
      additionalPortMappings:
      - external: true
        targetPort: 1935
        exposedPort: 1935
        transport: tcp
    secrets: []
  template:
    containers:
    - image: owncast/owncast:latest
      name: owncast-app
      resources:
        cpu: 0.25
        memory: 0.5Gi
      volumeMounts:
      - mountPath: /app/data
        volumeName: data
      env:
      - name: OWNCAST_RTMP_PORT
        value: &quot;1935&quot;
      - name: OWNCAST_WEBSERVER_PORT  
        value: &quot;8080&quot;
      - name: OWNCAST_DATABASE_FILE
        value: &quot;/app/data/db/owncast.db&quot;
      - name: OWNCAST_DATABASE_JOURNAL_MODE
        value: &quot;DELETE&quot;
      - name: OWNCAST_LOG_DIRECTORY
        value: &quot;/app/data/logs&quot;
      - name: OWNCAST_DATA_DIRECTORY
        value: &quot;/app/data&quot;
      - name: OWNCAST_HLS_DIRECTORY
        value: &quot;/app/data/hls&quot;
    scale:
      minReplicas: 0
      maxReplicas: 1
      rules:
      - name: &quot;http-rule&quot;
        http:
          metadata:
            concurrentRequests: &quot;10&quot;
    volumes:
    - name: data
      storageType: AzureFile
      storageName: owncast-storage
</code></pre>
<p>Deploy with:</p>
<pre><code class="language-bash">az containerapp create \
  --name $CONTAINER_APP_NAME \
  --resource-group $RESOURCE_GROUP \
  --yaml owncast-production-ready.yaml
</code></pre>
<h2>Critical Configuration Notes</h2>
<h3>SQLite + Azure Files Compatibility Fix</h3>
<p><strong>Important</strong>: The default Owncast configuration can cause &quot;database is locked&quot; errors when using Azure Files storage due to SQLite's WAL (Write-Ahead Logging) mode being incompatible with network file systems. The configuration above includes these critical fixes:</p>
<ol>
<li><strong>Database Subdirectory</strong>: <code>OWNCAST_DATABASE_FILE=/app/data/db/owncast.db</code> - Places database in a subdirectory which improves Azure Files compatibility</li>
<li><strong>Journal Mode Override</strong>: <code>OWNCAST_DATABASE_JOURNAL_MODE=DELETE</code> - Forces SQLite to use DELETE mode instead of WAL mode to prevent file locking issues</li>
<li><strong>Full Data Mount</strong>: Mounts entire <code>/app/data</code> directory for complete persistence of logs, database, and HLS content</li>
</ol>
<h3>What Gets Persisted</h3>
<p>With this configuration, the following data persists across container restarts:</p>
<ul>
<li><strong>User accounts and chat history</strong> (critical for community continuity)</li>
<li><strong>Stream keys and admin credentials</strong> (prevents reconfiguration)</li>
<li><strong>ActivityPub federation data</strong> (maintains Mastodon/Fediverse followers)</li>
<li><strong>Server customization and branding</strong> (logos, site name, descriptions)</li>
<li><strong>API tokens and webhook configurations</strong> (third-party integrations)</li>
<li><strong>Complete logs and HLS video segments</strong></li>
</ul>
<p><strong>Without proper persistence, you would lose all users, followers, and configuration on every container restart.</strong></p>
<h2>Cost Optimization Features</h2>
<h3>Scale-to-Zero Configuration</h3>
<ul>
<li><strong>Min Replicas</strong>: Set to 0 to completely scale down when not in use</li>
<li><strong>Max Replicas</strong>: Set to 1 (Owncast doesn't need horizontal scaling)</li>
<li><strong>Scale Rules</strong>: Container Apps will automatically scale up when requests arrive</li>
</ul>
<h3>Resource Limits (Ultra Cost-Optimized)</h3>
<ul>
<li><strong>CPU</strong>: 0.25 cores (absolute minimum, sufficient for 1-2 viewer streams)</li>
<li><strong>Memory</strong>: 0.5Gi (minimum allowed by Azure Container Apps)</li>
<li><strong>Storage</strong>: Cool tier with 1GB initial quota (auto-scales as needed)</li>
<li><strong>Network</strong>: Minimal VNet addressing to reduce overhead</li>
</ul>
<h2>OBS Configuration</h2>
<p>After deployment, configure OBS for streaming:</p>
<ol>
<li><p><strong>Server Settings</strong>: Use <code>rtmp://your-app-url:1935/live</code> (note: <code>rtmp://</code> not <code>https://</code>)</p>
</li>
<li><p><strong>Stream Key</strong>: Use the key from Owncast admin panel (Configuration &gt; Server Setup &gt; Stream Keys)</p>
</li>
<li><p><strong>Owncast Web Interface</strong>: Access at <code>https://your-app-url</code> (port 8080 is handled automatically by ingress)</p>
</li>
<li><p><strong>Persistent Data</strong>: All Owncast configuration, database, and uploaded files are stored in Azure Files and persist across container restarts and scale-to-zero events. <strong>Critical</strong>: Uses SQLite DELETE journal mode to prevent &quot;database is locked&quot; errors with Azure Files.</p>
</li>
<li><p><strong>Cold Start</strong>: When scaling from zero, there will be a 10-15 second cold start delay as the container initializes. This is normal and acceptable for personal streaming.</p>
</li>
<li><p><strong>VNet Requirement</strong>: For dual-port access (HTTP + RTMP), you <strong>must</strong> use a Virtual Network integration. This is a requirement for exposing additional TCP ports in Azure Container Apps.</p>
</li>
<li><p><strong>Database Compatibility</strong>: The configuration includes specific environment variables (<code>OWNCAST_DATABASE_JOURNAL_MODE=DELETE</code>) to ensure SQLite works properly with Azure Files network storage. Without these settings, you'll experience database crashes.</p>
</li>
<li><p><strong>Security Configuration</strong>: After deployment, immediately change the default admin credentials:</p>
<ul>
<li>Navigate to <code>https://your-app-url/admin</code></li>
<li>Default login: <code>admin</code> / <code>abc123</code></li>
<li>Go to Configuration &gt; Server Setup and change the admin password</li>
<li>Create/copy stream keys from Configuration &gt; Server Setup &gt; Stream Keys tab</li>
</ul>
</li>
<li><p><strong>Custom Domain</strong>: You can configure a custom domain using:</p>
<pre><code class="language-bash">az containerapp hostname add \
  --name $CONTAINER_APP_NAME \
  --resource-group $RESOURCE_GROUP \
  --hostname &quot;your-domain.com&quot;
</code></pre>
</li>
<li><p><strong>SSL Certificate</strong>: Azure Container Apps provides automatic SSL certificates for custom domains.</p>
</li>
</ol>
<h2>Monitoring and Troubleshooting</h2>
<p>Check your deployment:</p>
<pre><code class="language-bash"># Get the URL
az containerapp show \
  --name $CONTAINER_APP_NAME \
  --resource-group $RESOURCE_GROUP \
  --query properties.configuration.ingress.fqdn
<h1>Test RTMP port connectivity (should return TcpTestSucceeded: True)</h1>
<p>Test-NetConnection -ComputerName &quot;your-app-url&quot; -Port 1935 -InformationLevel Detailed</p>
<h1>Test web interface</h1>
<p>curl -I https://your-app-url/</p>
<h1>View logs</h1>
<p>az containerapp logs show <br />
--name $CONTAINER_APP_NAME <br />
--resource-group $RESOURCE_GROUP
</code></pre></p>
<h3>Common Issues and Solutions</h3>
<p><strong>Problem</strong>: Container logs show &quot;database is locked&quot; errors and crashes
<strong>Solution</strong>: Ensure you're using the configuration above with <code>OWNCAST_DATABASE_JOURNAL_MODE=DELETE</code> and database in a subdirectory</p>
<p><strong>Problem</strong>: OBS shows &quot;Failed to connect to server&quot;<br />
<strong>Solution</strong>: Verify RTMP port 1935 is accessible using <code>Test-NetConnection</code> and ensure you're using VNet integration</p>
<p><strong>Problem</strong>: Admin panel won't load or shows errors
<strong>Solution</strong>: Database persistence issues - check that the <code>/app/data</code> mount is working and SQLite journal mode is set correctly</p>
<p><strong>Problem</strong>: Container scales to zero but doesn't start properly
<strong>Solution</strong>: Cold start delay is normal (10-15 seconds). If it doesn't start, check environment variable configuration</p>
<h2>Cost Estimation (Ultra-Optimized)</h2>
<p>With these optimizations, your monthly costs should be:</p>
<p><strong>When Streaming (4 hours/month example):</strong></p>
<ul>
<li><strong>Compute</strong>: ~$0.50/month (0.25 CPU + 0.5Gi RAM × 4 hours)</li>
<li><strong>Container Apps Environment</strong>: ~$0.00 (consumption plan, no dedicated resources)</li>
<li><strong>Networking</strong>: ~$0.05/month (minimal VNet overhead)</li>
</ul>
<p><strong>When Idle (Scale-to-Zero):</strong></p>
<ul>
<li><strong>Compute</strong>: $0.00 (scaled to zero)</li>
<li><strong>Environment</strong>: $0.00 (consumption plan)</li>
</ul>
<p><strong>Always-On Costs:</strong></p>
<ul>
<li><strong>Storage</strong>: ~$0.05-0.10/month (1-2GB in Cool tier)</li>
<li><strong>VNet</strong>: ~$0.00 (no gateways or dedicated resources)</li>
</ul>
<p><strong>Total Monthly Cost: ~$0.60-0.65/month</strong> (assuming 4 hours of streaming)</p>
<h3>Performance Expectations at Minimal Resources:</h3>
<ul>
<li><strong>0.25 CPU + 0.5Gi RAM</strong>: Suitable for 480p-720p streams with 1-5 concurrent viewers</li>
<li><strong>Scale-up Path</strong>: Monitor performance and increase to 0.5 CPU + 1Gi if needed</li>
<li><strong>Cold Start</strong>: ~10-15 seconds when scaling from zero (acceptable for personal streaming)</li>
</ul>
</div><footer class="post-footer"><div class="permalink-info">Permalink: <a class="u-url permalink-link" href="/resources/snippets/owncast-optimized-azure-deployment-guide/">/resources/snippets/owncast-optimized-azure-deployment-guide/</a></div><div><script type="application/javascript">window.onload = function() { document.getElementById('webmention-target').value = window.location.href }</script><form action="https://webmentions.lqdev.tech/api/inbox" method="POST" enctype="application/x-www-form-urlencoded"><h5 class="text-center">Send me a <a href="/contact">message</a> or <a href="https://indieweb.org/webmentions">webmention</a></h5><div class="form-row justify-content-center"><div class="w-75"><input type="url" class="form-control" name="source" placeholder="Your URL (webmention source)" required /></div><div class="col-auto"><input type="submit" class="btn btn-primary" value="Send" /></div><input type="hidden" readonly name="target" id="webmention-target" /></div></form></div></footer></article></div></div></main><script src="/assets/lib/jquery/jquery.slim.min.js"></script><script src="/assets/lib/boostrap/bootstrap.min.js"></script><script src="/assets/lib/highlight/highlight.min.js"></script><script src="/assets/lib/highlight/highlight.fsharp.min.js"></script><script src="/assets/lib/highlight/highlight.nix.min.js"></script><script src="/assets/js/timeline.js"></script><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script type="application/javascript">mermaid.initialize({startOnLoad:true});</script><script type="application/javascript">hljs.initHighlightingOnLoad();</script><script src="/lib/revealjs/dist/reveal.js"></script><script src="/lib/revealjs/plugin/markdown/markdown.js"></script><script src="/lib/revealjs/plugin/highlight/highlight.js"></script><script type="application/javascript">
                    // Initialize Reveal.js when a presentation container is found on the page
                    document.addEventListener('DOMContentLoaded', function() {
                        const presentationContainer = document.querySelector('.presentation-container');
                        if (presentationContainer && typeof Reveal !== 'undefined') {
                            Reveal.initialize({
                                plugins: [RevealMarkdown, RevealHighlight],
                                embedded: true
                            });
                        }
                    });
                    </script></body><footer><a rel="me" href="https://toot.lqdev.tech/@lqdev"></a><a rel="me" href="https://github.com/lqdev"></a><a rel="me" href="https://twitter.com/ljquintanilla"></a><a rel="me" href="https://www.linkedin.com/in/lquintanilla01/"></a><a rel="me" href="mailto:lqdev@outlook.com"></a></footer></html>