<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/text/assets/text-only.css"><meta name="description" content="Text-only accessible version of Luis Quintanilla&#39;s website"><meta name="robots" content="noindex, nofollow"><title>The lqvlc network protocol - Text-Only Site</title></head><body><a href="#main-content" class="skip-link">Skip to main content</a><header role="banner"><h1><a href="/text/">Luis Quintanilla</a></h1><p>Text-Only Accessible Website</p></header><nav role="navigation" aria-label="Main navigation"><ul><li><a href="/text/">Home</a></li><li><a href="/text/about/">About</a></li><li><a href="/text/contact/">Contact</a></li><li><a href="/text/content/">All Content</a></li><li><a href="/text/feeds/">RSS Feeds</a></li><li><a href="/text/help/">Help</a></li></ul></nav><main role="main" id="main-content"><div><h1>The lqvlc network protocol</h1><div class="content-meta"><div class="content-type">posts</div><time datetime="2022-07-07">July 7, 2022</time><p>Tags: firefox, vlc, web, open source, linux</p></div><p><a href="/text/">← Home</a> | <a href="/text/content/posts/">← All posts</a> | <a href="https://www.lqdev.me/posts/lqvlc-network-protocol-firefox">View Full Version</a></p><div class="content"><h2>Introduction</h2>
<p>Whether it's videos, online radio, podcasts, or my personal music collection, VLC is my default player. I especially enjoy the ability of playing an online audio or video stream using the URL. What I don't like about that process is that I usually have to manually copy the link and use either the terminal or graphical user interface to play the stream. While not a large number of additional steps, it's still not ideal. The experience I would like is to automatically launch VLC whenever I click a link to an audio or video stream. That's possible using custom network protocols in Firefox. In this guide, I'll show how I defined and configured my own protocol (lqvlc) in Firefox to automatically launch VLC.</p>
<h2>Prerequisites</h2>
<ul>
<li>VLC</li>
<li>Firefox</li>
</ul>
<p>This guide was built to work on unix systems. However, setting up something similar with a PowerShell or CMD script on Windows should work similarly.</p>
<h2>Network protocols</h2>
<p>A network protocol defines how data is exchanged and transferred over a network. Some common protocols are HTTP, FTP, and SSH. In the context of browsers, the most common protocol is HTTP and the way the browser identifies the protocol is based on the scheme portion of the URL. So for the website <a href="http://lqdev.me">http://lqdev.me</a>, http is the scheme that tells the browser which protocol to use. For more information on network protocols and URLs, see the article <a href="https://developer.mozilla.org/docs/Learn/Common_questions/What_is_a_URL">What is a URL?</a>.</p>
<p>Firefox has a set of standard protocols like HTTP that are configured out of the box. However, you have the option of configuring a custom protocol.</p>
<h2>What is the lqvlc protocol</h2>
<p>Now that you have a general idea of what network protocols are and how browsers handle them, it's time to introduce the lqvlc protocol. The intent of the lqvlc protocol is to automatically take a URL from an online audio or video stream and launch it in VLC. lqvlc protocol URLs use lqvlc as the scheme instead of http.</p>
<p>For example:</p>
<table class="table">
    <tr>
        <th>Original Audio Stream Link</th>
        <th>lqvlc Link</th>
    </tr>
    <tr>
        <td><a href="https://somafm.com/u80s64.pls">https://somafm.com/u80s64.pls</a></td>
        <td><a href="lqvlc://somafm.com/u80s64.pls">lqvlc://somafm.com/u80s64.pls</a></td>
    </tr>    
</table>
<p>You'll notice the only difference is the scheme. That's enough information for the browser to know, lqvlc is a protocol I need to handle in some way. In the next sections, I'll describe what you need to do to get Firefox to recognize and handle the lqvlc protocol.</p>
<h2>Configure network protocols in Firefox</h2>
<p>To configure a custom network protocol</p>
<ol>
<li><p>Launch Firefox</p>
</li>
<li><p>In the address bar, navigate to <code>about:config</code> and select <strong>Accept the Risk and continue</strong>. As the warning mentions, these are advanced configurations so proceed with caution.</p>
</li>
<li><p>Add the following configuration preferences:</p>
 <table class="table">
     <tr>
         <th>Configuration Preference</th>
         <th>Type</th>
         <th>Value</th>
     </tr>
     <tr>
         <td><i>network.protocol-handler.expose.lqvlc</i></td>
         <td>Boolean</td>
         <td>false</td>
     </tr>                            
     <tr>
         <td><i>network.protocol-handler.external.lqvlc</i></td>
         <td>Boolean</td>
         <td>true</td>
     </tr>
     <tr>
         <td><i>network.protocol-handler.warn-external.lqvlc</i></td>
         <td>Boolean</td>
         <td>true</td>
     </tr>
 </table>
<p><a href="https://user-images.githubusercontent.com/11130940/177898847-79cce773-9275-4e4d-8e7c-a6b5fbfe8f48.png" target="_blank">[Image: Firefox lqvlc network protocol handler configuration preferences]</a></p>
<p>The last two tell Firefox to let an external application handle files with the protocol you've defined. In this case, that's <code>lqvlc</code>. If you're configuring your own protocol, you'd replace the lqvlc in the configuration preference with your own.</p>
</li>
</ol>
<h2>Create a handler</h2>
<p>Now that Firefox knows that it must use an external application to handle lqvlc URLs, it's time to configure the handler. The easiest way to create a handler is to use a bash script.</p>
<ol>
<li><p>Create a new file called <em>lqvlc-handler.sh</em> with the following content:</p>
<pre><code class="language-bash">#!/bin/bash

link=$1

vlc &quot;${link/lqvlc/http}&quot;
</code></pre>
<p>The script takes the first argument it's passed, an lqvlc URL, replaces the scheme with <code>http</code>, and launches it in VLC.</p>
</li>
<li><p>Make the file executable. In the terminal, run the following command:</p>
<pre><code class="language-bash">chmod +x lqvlc-handler.sh
</code></pre>
</li>
</ol>
<p>That's it! Now you just need to test it out.</p>
<h2>Test it out</h2>
<p>To use it for your own purposes, you'd have to create or update an HTML page and set the <code>href</code> in your anchor tags to use <code>lqvlc</code> instead of <code>http</code>. However, I've already configured lqvlc links in my own website. If you go to the <a href="/radio">radio page</a> on my website, you can click on any of the lqvlc links. Alternatively, You can also click on the link to the <a href="lqvlc://somafm.com/u80s64.pls">SOMA FM Underground 80's station lqvlc link</a>. A prompt will pop up asking you to choose which app you want to use to handle the link. Select the lqvlc-handler.sh script you created. If everything is configured correctly, VLC should launch and the radio stations should start playing.</p>
<h2>Next Steps</h2>
<p>Although I've gotten this working for my personal site, I'd like to be able to use the lqvlc protocol in any website I visit that has links to audio and video streams. Arguably, I can also launch lqvlc links from other websites. However, that would require website owners to configure them. The next step I think to make that happen would be to create an Add-On that automatically rewrites stream links to use the lqvlc protocol.</p>
</div></div></main><footer role="contentinfo"><hr><p><a href="/">Full Site</a> | <a href="/text/accessibility/">Accessibility</a></p></footer></body></html>