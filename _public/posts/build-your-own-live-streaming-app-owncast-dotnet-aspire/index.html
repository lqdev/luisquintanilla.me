<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" href="/assets/css/custom/main.css"><link rel="stylesheet" href="/assets/css/custom/timeline.css"><link rel="stylesheet" href="/assets/css/bootstrap-icons-1.5.0/bootstrap-icons.css"><link rel="stylesheet" href="/assets/css/highlight.github-dark-dimmed.min.css"><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="/lib/revealjs/dist/reveal.css"><link rel="stylesheet" href="/lib/revealjs/dist/theme/black.css"><link rel="stylesheet" href="/lib/revealjs/plugin/highlight/monokai.css"><meta property="og:title" content="Build your own self-hosted live streaming application with Owncast and .NET Aspire - Luis Quintanilla"><meta property="og:type" content="website"><meta property="og:image" content="https://www.lqdev.me/avatar.png"><meta property="og:image:secure_url" content="https://www.lqdev.me/avatar.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="200"><meta property="og:image:height" content="200"><meta property="og:site_name" content="Luis Quintanilla Personal Website"><meta property="og:locale" content="en_US"><meta property="twitter:image" content="https://www.lqdev.me/avatar.png"><meta property="fediverse:creator" content="@lqdev@toot.lqdev.tech"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Blog RSS Feed" href="/blog.rss"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Microblog RSS Feed" href="/microblog.rss"><link rel="alternate" type="application/rss+xml" title="Luis Quintanilla Response RSS Feed" href="/responses.rss"><link rel="webmention" title="Luis Quintanilla Webmention Endpoint" href="https://webmentions.lqdev.tech/api/inbox"><link rel="feeds" type="text/xml" title="Luis Quintanilla&#39;s Feeds" href="/feed/index.opml"><link rel="blogroll" type="text/xml" title="Luis Quintanilla&#39;s Blogroll" href="/collections/blogroll/index.opml"><link rel="podroll" type="text/xml" title="Luis Quintanilla&#39;s Podroll" href="/collections/podroll/index.opml"><link rel="youtuberoll" type="text/xml" title="Luis Quintanilla&#39;s YouTube Roll" href="/collections/youtube/index.opml"><meta name="robots" content="nosnippet"><title>Build your own self-hosted live streaming application with Owncast and .NET Aspire - Luis Quintanilla</title></head><body><button class="mobile-toggle" id="mobile-nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false"><div class="hamburger"><span></span><span></span><span></span></div></button><div class="nav-overlay" id="nav-overlay"></div><nav class="desert-nav" id="sidebar-menu" role="navigation" aria-label="Main navigation"><div class="nav-brand"><a href="/" class="brand-text"><img src="/avatar.png" alt="Luis Quintanilla avatar" loading="lazy">Luis Quintanilla</a></div><div class="nav-section"><a class="nav-link" href="/"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"></path></svg>Home</a><a class="nav-link" href="/about"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>About</a><a class="nav-link" href="/contact"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"></path></svg>Contact</a><a class="nav-link" href="/search"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg>Search</a><a class="nav-link" href="/feed"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"></path></svg>Subscribe</a></div><div class="nav-section dropdown"><button class="nav-link dropdown-toggle" data-target="collections-dropdown"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"></path><path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"></path></svg>Collections<svg class="dropdown-arrow" viewBox="0 0 16 16" fill="currentColor"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path></svg></button><div class="dropdown-menu" id="collections-dropdown"><a class="dropdown-item" href="/collections/blogroll">Blogroll</a><a class="dropdown-item" href="/collections/podroll">Podroll</a><a class="dropdown-item" href="/collections/youtube">YouTube</a><a class="dropdown-item" href="/collections/forums">Forums</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/collections/starter-packs">Starter Packs</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/radio">Radio</a><a class="dropdown-item" href="/tags">Tags</a></div></div><div class="nav-section dropdown"><button class="nav-link dropdown-toggle" data-target="resources-dropdown"><svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"></path></svg>Resources<svg class="dropdown-arrow" viewBox="0 0 16 16" fill="currentColor"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path></svg></button><div class="dropdown-menu" id="resources-dropdown"><a class="dropdown-item" href="/resources/snippets">Snippets</a><a class="dropdown-item" href="/resources/wiki">Wiki</a><a class="dropdown-item" href="/resources/presentations">Presentations</a></div></div><div class="theme-toggle"><button class="theme-toggle-btn" id="theme-toggle" aria-label="Toggle dark mode"><span id="theme-toggle-icon">☀️</span><span>Theme</span></button></div></nav><main role="main" class="main-content" id="main-content"><div class="content-wrapper"><div class="mr-auto"><article class="h-entry individual-post"><header class="post-header"><h1 class="p-name post-title">Build your own self-hosted live streaming application with Owncast and .NET Aspire</h1><div class="post-meta"><time class="dt-published" datetime="2024-10-20 14:01 -05:00">October 20, 2024</time></div><div class="u-author h-card microformat-hidden"><img src="/avatar.png" class="u-photo" alt="Luis Quintanilla" /><a href="/about" class="u-url p-name">Luis Quintanilla</a></div></header><div class="e-content post-content"><p>Platforms come and go. As a result, I'm a strong advocate for <a href="https://indieweb.org/own_your_data">owning your data</a> (when possible). Self-hosting is a way for you to do that. Owning your data could mean self-hosting <a href="https://buttondown.com/ownyourweb/archive/issue-06/">your website</a>, <a href="https://bitwarden.com/blog/host-your-own-open-source-password-manager/">password manager</a>, <a href="https://jellyfin.org/docs/">media server</a>, or <a href="https://docs.joinmastodon.org/user/run-your-own/">social media</a>. However, self-hosting comes with its own challenges, primarily cost (time and money) and in cases where software isn't provided as an appliance on your hosting provider of choice, some technical knowledge may be required.</p>
<p>As I got more into self-hosting applications such as my <a href="/mastodon">Mastodon instance</a>, I came across Owncast.</p>
<p>During peak COVID lockdowns, like many others, live streaming is one of the ways I passed the time. While Twitch and YouTube got the job done, self-hosting was always in the back of my mind.</p>
<p>It's been a while since I've live-streamed, so I never really went through the process of evaluating the self-hosted route with Owncast.</p>
<p>While browsing for something on YouTube the other day, I ran into some of my <a href="https://www.youtube.com/playlist?list=PLsdMoYmuvh9ZtgB8U7FECR_8wKMYXJNAm">old live-stream recordings</a>. This got me thinking again, how difficult would it be to put together my own live-streaming setup.</p>
<p>This post is the result of that exploration.</p>
<p>In this post, I'll modify a .NET Aspire Starter Application template and show how to set up a self-hosted live-streaming application using Owncast and .NET Aspire.</p>
<p>You can find the source code in the <a href="/github/BYOwncastAspire">lqdev/BYOwncastAspire</a> repository.</p>
<p><img src="https://github.com/user-attachments/assets/bdd9f901-8d8f-45be-9e37-4dce8459e481" class="img-fluid" alt="BYOwnCastAspire Web Frontend" /></p>
<h2>What is Owncast?</h2>
<p>The Owncast website describes the project as, &quot;...a free and open source live video and web chat server for use with existing popular broadcasting software.&quot;</p>
<p><img src="https://github.com/user-attachments/assets/769ec2d8-a3d1-4ec3-8271-c2de6e11ddd3" class="img-fluid" alt="Owncast admin server page" /></p>
<p>It goes on to further describe some of the reasons I like Owncast, which are:</p>
<ul>
<li><strong>Self-hosting</strong> - I'm in complete control over the service and my data</li>
<li><strong>Open-source</strong> - I can freely use and contribute to the project. Free in this case meaning both as in freedom and pizza.</li>
<li><strong>Builds on top of open standards like RMTP</strong> - Software that supports the Real-Time Messaging Protocol (RMTP) like OBS can immediately be leveraged.</li>
<li><strong>Fediverse compatible</strong> - Your content and network federated across <a href="https://joinfediverse.wiki/What_is_the_Fediverse%3F">the Fediverse</a>.</li>
</ul>
<p>To learn more, check out the <a href="https://owncast.online/">Owncast website</a>.</p>
<h2>What is .NET Aspire?</h2>
<p>The .NET Aspire documentation describes it as, &quot;...an opinionated, cloud ready stack for building observable, production ready, distributed applications.​ .NET Aspire is delivered through a collection of NuGet packages that handle specific cloud-native concerns.&quot;</p>
<p>Personally, the parts of .NET Aspire that matter to me are:</p>
<ul>
<li><strong>App composition</strong> - The .NET Aspire programming model makes it easy to define and compose a variety of resources such as .NET projects, containers, and much more in a single place. In many cases, for commonly used services, these resources are exposed in the form of <a href="https://learn.microsoft.com/dotnet/aspire/fundamentals/integrations-overview">integrations</a>. These integrations further simplify the composition of applications.</li>
<li><strong>Tooling (Dashboard)</strong> - .NET Aspire provides a set of tools and templates. However, my favorite is the dashboard. The dashboard provides me with a single place to view my resources, their configurations, and logs.</li>
</ul>
<p>Although in this post, I don't cover deployment, there is also the provisioning component provided by .NET Aspire which in many cases can <a href="https://learn.microsoft.com/dotnet/aspire/deployment/overview">simplify your application deployments</a>.</p>
<p>To learn more, check out the <a href="https://learn.microsoft.com/dotnet/aspire/get-started/aspire-overview">.NET Aspire documentation</a>.</p>
<h2>Build your application</h2>
<p>This application makes a few modifications to the <a href="https://learn.microsoft.com/dotnet/aspire/fundamentals/setup-tooling?tabs=linux&amp;pivots=dotnet-cli#net-aspire-project-templates">.NET Aspire Starter Application template</a>.</p>
<p>The application consists of a few projects:</p>
<ul>
<li><strong>BYOwncastAspire.AppHost</strong> - This project is the entrypoint for .NET Aspire applications. This is where we'll configure the Owncast server as a container resource.</li>
<li><strong>BYOwncastAspire.Web</strong> - Blazor web application. Although Owncast provides its own page where viewers can tune into your stream, by having a separate web application, preferably your own personal website, you can further enrich and customize how and where you publish content.</li>
<li><strong>BYOwncastAspire.ServiceDefaults</strong> - This project contains default configurations for telemetry, health checks, resiliency, etc. No changes or updates required here.</li>
</ul>
<h3>Configure Owncast</h3>
<p>There are many ways to host an Owncast server, with one of them being a container.</p>
<p>In the context of Aspire which has built-in container support, you can easily add Owncast as a resource in your application.</p>
<p>From the <a href="https://owncast.online/quickstart/container/">Owncast documentation</a>, once you've pulled the Owncast container image, you can start it with the following command.</p>
<pre><code class="language-bash">docker run -v `pwd`/data:/app/data -p 8080:8080 -p 1935:1935 owncast/owncast:latest
</code></pre>
<p>This translates to the following in the <em>Program.cs</em> of the <em>BYOwncastAspire.AppHost</em> project.</p>
<pre><code class="language-csharp">var owncast = builder
    .AddContainer(name: &quot;owncast&quot;, image:&quot;owncast/owncast&quot;)
    .WithBindMount(&quot;./data&quot;,&quot;/app/data&quot;)
    .WithHttpEndpoint(port:8080,targetPort:8080,name:&quot;admin&quot;)
    .WithHttpEndpoint(port:1935,targetPort:1935,name:&quot;streaming&quot;)
    .WithExternalHttpEndpoints();
</code></pre>
<p>This code:</p>
<ul>
<li>Adds the owncast container image</li>
<li>Mounts a local <em>data</em> directory to the <em>/app/data</em> directory in the container</li>
<li>Maps port <code>8080</code> for the Owncast admin server and <code>1935</code> for RMTP server.</li>
<li>Exposes the endpoints publicly</li>
</ul>
<h3>Embed your stream</h3>
<p>Owncast provides the ability to <a href="https://owncast.online/docs/embed/">embed your video stream onto a website</a>.</p>
<p>Although we don't need a frontend because one is already provided by Owncast, by embedding your stream on your website you can provide a single place for your viewers to consume your content.</p>
<p>In this case, we can treat the <em>BYOwncastAspire.Web</em> project as our website.</p>
<p>To embed your stream to the website, add the following code to your <em>Home.razor</em> page.</p>
<pre><code class="language-csharp">&lt;iframe
  src=&quot;http://localhost:8080/embed/video&quot;
  title=&quot;Owncast&quot;
  height=&quot;350px&quot; width=&quot;550px&quot;
  referrerpolicy=&quot;origin&quot;
  allowfullscreen&gt;
&lt;/iframe&gt;
</code></pre>
<p>In this case, we're pointing to the endpoint listening on port <code>8080</code> of our <code>localhost</code>. When you deploy the application, you'd replace <code>src</code> with your domain.</p>
<h2>Start your application</h2>
<p>That's all there is in terms of configuration.</p>
<p>To start the application:</p>
<ol>
<li><p>Open the terminal</p>
</li>
<li><p>Navigate to the <em>BYOwncastAspire.AppHost</em> project and run the following command.</p>
<pre><code class="language-bash">dotnet run
</code></pre>
</li>
</ol>
<p>This will launch you into the .NET Aspire dashboard. At this point, you can further customize your Owncast server as well as the website.</p>
<p><img src="https://github.com/user-attachments/assets/c20d84d8-925a-4f80-9058-622466cb08e9" class="img-fluid" alt="BYOwncastAspire .NET Aspire Dashboard Resource Page" /></p>
<h2>What next?</h2>
<p>Now that you have your application running, in its current form, this application is only meant to serve as a sample of what you can do with Owncast and .NET Aspire.</p>
<p>Some next steps might include:</p>
<ul>
<li><a href="https://owncast.online/docs/configuration/">Change your admin password and customize your Owncast server</a></li>
<li><a href="https://owncast.online/docs/storage/">Configure object storage</a></li>
<li><a href="https://owncast.online/docs/broadcasting/obs/">Set up your steaming software</a></li>
<li><a href="https://learn.microsoft.com/dotnet/aspire/deployment/azure/aca-deployment">Deploy your application</a></li>
<li><a href="https://owncast.online/thirdparty/">Extend the app's functionality by building custom plugins and extensions</a></li>
</ul>
<p>The plugins and extensions are particularly interesting to me because there may even be opportunities to experiment and insert AI capabilities at various layers such as moderation, translation, accessibility, show notes, chat summaries, etc.</p>
<h2>Conclusion</h2>
<p>In this post, I showed how you can combine the powerful live-steaming features of Owncast with the app orchestration and tooling in .NET Aspire to create rich self-hosted live-steaming applications.</p>
<p>If you use this sample as a starting point for your own live-streaming or self-hosting explorations, <a href="/contact">send me a message</a>. I'd love to hear about it.</p>
</div><footer class="post-footer"><div class="permalink-info">Permalink: <a class="u-url permalink-link" href="/posts/build-your-own-live-streaming-app-owncast-dotnet-aspire/">/posts/build-your-own-live-streaming-app-owncast-dotnet-aspire/</a></div><div><script type="application/javascript">window.onload = function() { document.getElementById('webmention-target').value = window.location.href }</script><form action="https://webmentions.lqdev.tech/api/inbox" method="POST" enctype="application/x-www-form-urlencoded"><h5 class="text-center">Send me a <a href="/contact">message</a> or <a href="https://indieweb.org/webmentions">webmention</a></h5><div class="form-row justify-content-center"><div class="w-75"><input type="url" class="form-control" name="source" placeholder="Your URL (webmention source)" required /></div><div class="col-auto"><input type="submit" class="btn btn-primary" value="Send" /></div><input type="hidden" readonly name="target" id="webmention-target" /></div></form></div></footer></article></div></div></main><script src="/assets/lib/jquery/jquery.slim.min.js"></script><script src="/assets/lib/boostrap/bootstrap.min.js"></script><script src="/assets/lib/highlight/highlight.min.js"></script><script src="/assets/lib/highlight/highlight.fsharp.min.js"></script><script src="/assets/lib/highlight/highlight.nix.min.js"></script><script src="/assets/js/timeline.js"></script><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script type="application/javascript">mermaid.initialize({startOnLoad:true});</script><script type="application/javascript">hljs.initHighlightingOnLoad();</script><script src="/lib/revealjs/dist/reveal.js"></script><script src="/lib/revealjs/plugin/markdown/markdown.js"></script><script src="/lib/revealjs/plugin/highlight/highlight.js"></script><script type="application/javascript">
                    // Initialize Reveal.js when a presentation container is found on the page
                    document.addEventListener('DOMContentLoaded', function() {
                        const presentationContainer = document.querySelector('.presentation-container');
                        if (presentationContainer && typeof Reveal !== 'undefined') {
                            Reveal.initialize({
                                plugins: [RevealMarkdown, RevealHighlight],
                                embedded: true
                            });
                        }
                    });
                    </script></body><footer><a rel="me" href="https://toot.lqdev.tech/@lqdev"></a><a rel="me" href="https://github.com/lqdev"></a><a rel="me" href="https://twitter.com/ljquintanilla"></a><a rel="me" href="https://www.linkedin.com/in/lquintanilla01/"></a><a rel="me" href="mailto:lqdev@outlook.com"></a></footer></html>